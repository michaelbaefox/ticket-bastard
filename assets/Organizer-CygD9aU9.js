import{c as ze,R as c,r as C,j as e,m as Be,f as an,u as Et,i as rn,P as Ct,p as on,t as Je,B as G,X as at}from"./index-D2yeNAie.js";import{o as ln,s as de,l as cn,h as dn,Z as Ze,u as un,F as mn,a as ie,b as le,c as ae,d as ue,f as me,g as fe,t as fn}from"./form-B8fhU38t.js";import{I as _}from"./input-CkWhwMAh.js";import{O as pn,k as hn,T as xn,l as gn,m as wn,n as vn,o as yn,P as bn,c as jn,d as Nn,C as Sn,D as Rn,a as En,e as Cn,f as Tn}from"./ticketing-WJVFv517.js";import{a as kn,u as Dn,S as In,C as An,b as On}from"./index-DmYM7KcY.js";import{a as Pn}from"./useLocalStorage-BXtlWNMh.js";import{D as wt,a as $n}from"./download-BM8Auqc5.js";import{E as Mn}from"./external-link-DKoQJSVN.js";import{A as Ln}from"./arrow-down-B5a7V5dq.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=ze("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=ze("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function Vn(n){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}const Tt=c.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),qe=()=>{const n=c.useContext(Tt);if(!n)throw new Error("useDrawerContext must be used within a Drawer.Root");return n};Vn(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const zn=24,qn=typeof window<"u"?C.useLayoutEffect:C.useEffect;function yt(...n){return(...r)=>{for(let s of n)typeof s=="function"&&s(...r)}}function Fn(){return ht(/^Mac/)}function Wn(){return ht(/^iPhone/)}function bt(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Yn(){return ht(/^iPad/)||Fn()&&navigator.maxTouchPoints>1}function kt(){return Wn()||Yn()}function ht(n){return typeof window<"u"&&window.navigator!=null?n.test(window.navigator.platform):void 0}const ot=typeof document<"u"&&window.visualViewport;function jt(n){let r=window.getComputedStyle(n);return/(auto|scroll)/.test(r.overflow+r.overflowX+r.overflowY)}function Dt(n){for(jt(n)&&(n=n.parentElement);n&&!jt(n);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}const Xn=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Qe=0,it;function Kn(n={}){let{isDisabled:r}=n;qn(()=>{if(!r)return Qe++,Qe===1&&kt()&&(it=Gn()),()=>{Qe--,Qe===0&&(it==null||it())}},[r])}function Gn(){let n,r=0,s=j=>{n=Dt(j.target),!(n===document.documentElement&&n===document.body)&&(r=j.changedTouches[0].pageY)},o=j=>{if(!n||n===document.documentElement||n===document.body){j.preventDefault();return}let v=j.changedTouches[0].pageY,M=n.scrollTop,O=n.scrollHeight-n.clientHeight;O!==0&&((M<=0&&v>r||M>=O&&v<r)&&j.preventDefault(),r=v)},l=j=>{let v=j.target;ft(v)&&v!==document.activeElement&&(j.preventDefault(),v.style.transform="translateY(-2000px)",v.focus(),requestAnimationFrame(()=>{v.style.transform=""}))},i=j=>{let v=j.target;ft(v)&&(v.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{v.style.transform="",ot&&(ot.height<window.innerHeight?requestAnimationFrame(()=>{Nt(v)}):ot.addEventListener("resize",()=>Nt(v),{once:!0}))}))},w=()=>{window.scrollTo(0,0)},m=window.pageXOffset,R=window.pageYOffset,N=yt(Jn(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let p=yt(We(document,"touchstart",s,{passive:!1,capture:!0}),We(document,"touchmove",o,{passive:!1,capture:!0}),We(document,"touchend",l,{passive:!1,capture:!0}),We(document,"focus",i,!0),We(window,"scroll",w));return()=>{N(),p(),window.scrollTo(m,R)}}function Jn(n,r,s){let o=n.style[r];return n.style[r]=s,()=>{n.style[r]=o}}function We(n,r,s,o){return n.addEventListener(r,s,o),()=>{n.removeEventListener(r,s,o)}}function Nt(n){let r=document.scrollingElement||document.documentElement;for(;n&&n!==r;){let s=Dt(n);if(s!==document.documentElement&&s!==document.body&&s!==n){let o=s.getBoundingClientRect().top,l=n.getBoundingClientRect().top,i=n.getBoundingClientRect().bottom;const w=s.getBoundingClientRect().bottom+zn;i>w&&(s.scrollTop+=l-o)}n=s.parentElement}}function ft(n){return n instanceof HTMLInputElement&&!Xn.has(n.type)||n instanceof HTMLTextAreaElement||n instanceof HTMLElement&&n.isContentEditable}function Zn(n,r){typeof n=="function"?n(r):n!=null&&(n.current=r)}function Qn(...n){return r=>n.forEach(s=>Zn(s,r))}function It(...n){return C.useCallback(Qn(...n),n)}const At=new WeakMap;function X(n,r,s=!1){if(!n||!(n instanceof HTMLElement))return;let o={};Object.entries(r).forEach(([l,i])=>{if(l.startsWith("--")){n.style.setProperty(l,i);return}o[l]=n.style[l],n.style[l]=i}),!s&&At.set(n,o)}function es(n,r){if(!n||!(n instanceof HTMLElement))return;let s=At.get(n);s&&(n.style[r]=s[r])}const K=n=>{switch(n){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return n}};function et(n,r){if(!n)return null;const s=window.getComputedStyle(n),o=s.transform||s.webkitTransform||s.mozTransform;let l=o.match(/^matrix3d\((.+)\)$/);return l?parseFloat(l[1].split(", ")[K(r)?13:12]):(l=o.match(/^matrix\((.+)\)$/),l?parseFloat(l[1].split(", ")[K(r)?5:4]):null)}function ts(n){return 8*(Math.log(n+1)-2)}function lt(n,r){if(!n)return()=>{};const s=n.style.cssText;return Object.assign(n.style,r),()=>{n.style.cssText=s}}function ns(...n){return(...r)=>{for(const s of n)typeof s=="function"&&s(...r)}}const H={DURATION:.5,EASE:[.32,.72,0,1]},Ot=.4,ss=.25,as=100,Pt=8,_e=16,pt=26,ct="vaul-dragging";function $t(n){const r=c.useRef(n);return c.useEffect(()=>{r.current=n}),c.useMemo(()=>(...s)=>r.current==null?void 0:r.current.call(r,...s),[])}function rs({defaultProp:n,onChange:r}){const s=c.useState(n),[o]=s,l=c.useRef(o),i=$t(r);return c.useEffect(()=>{l.current!==o&&(i(o),l.current=o)},[o,l,i]),s}function Mt({prop:n,defaultProp:r,onChange:s=()=>{}}){const[o,l]=rs({defaultProp:r,onChange:s}),i=n!==void 0,w=i?n:o,m=$t(s),R=c.useCallback(N=>{if(i){const j=typeof N=="function"?N(n):N;j!==n&&m(j)}else l(N)},[i,n,l,m]);return[w,R]}function os({activeSnapPointProp:n,setActiveSnapPointProp:r,snapPoints:s,drawerRef:o,overlayRef:l,fadeFromIndex:i,onSnapPointChange:w,direction:m="bottom",container:R,snapToSequentialPoint:N}){const[p,j]=Mt({prop:n,defaultProp:s==null?void 0:s[0],onChange:r}),[v,M]=c.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);c.useEffect(()=>{function b(){M({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const O=c.useMemo(()=>p===(s==null?void 0:s[s.length-1])||null,[s,p]),E=c.useMemo(()=>s==null?void 0:s.findIndex(b=>b===p),[s,p]),B=s&&s.length>0&&(i||i===0)&&!Number.isNaN(i)&&s[i]===p||!s,f=c.useMemo(()=>{const b=R?{width:R.getBoundingClientRect().width,height:R.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var k;return(k=s==null?void 0:s.map(d=>{const q=typeof d=="string";let u=0;if(q&&(u=parseInt(d,10)),K(m)){const F=q?u:v?d*b.height:0;return v?m==="bottom"?b.height-F:-b.height+F:F}const Y=q?u:v?d*b.width:0;return v?m==="right"?b.width-Y:-b.width+Y:Y}))!=null?k:[]},[s,v,R]),V=c.useMemo(()=>E!==null?f==null?void 0:f[E]:null,[f,E]),A=c.useCallback(b=>{var k;const d=(k=f==null?void 0:f.findIndex(q=>q===b))!=null?k:null;w(d),X(o.current,{transition:`transform ${H.DURATION}s cubic-bezier(${H.EASE.join(",")})`,transform:K(m)?`translate3d(0, ${b}px, 0)`:`translate3d(${b}px, 0, 0)`}),f&&d!==f.length-1&&d!==i&&d<i?X(l.current,{transition:`opacity ${H.DURATION}s cubic-bezier(${H.EASE.join(",")})`,opacity:"0"}):X(l.current,{transition:`opacity ${H.DURATION}s cubic-bezier(${H.EASE.join(",")})`,opacity:"1"}),j(s==null?void 0:s[Math.max(d,0)])},[o.current,s,f,i,l,j]);c.useEffect(()=>{if(p||n){var b;const k=(b=s==null?void 0:s.findIndex(d=>d===n||d===p))!=null?b:-1;f&&k!==-1&&typeof f[k]=="number"&&A(f[k])}},[p,n,s,f,A]);function h({draggedDistance:b,closeDrawer:k,velocity:d,dismissible:q}){if(i===void 0)return;const u=m==="bottom"||m==="right"?(V??0)-b:(V??0)+b,Y=E===i-1,F=E===0,z=b>0;if(Y&&X(l.current,{transition:`opacity ${H.DURATION}s cubic-bezier(${H.EASE.join(",")})`}),!N&&d>2&&!z){q?k():A(f[0]);return}if(!N&&d>2&&z&&f&&s){A(f[s.length-1]);return}const J=f==null?void 0:f.reduce((Z,U)=>typeof Z!="number"||typeof U!="number"?Z:Math.abs(U-u)<Math.abs(Z-u)?U:Z),he=K(m)?window.innerHeight:window.innerWidth;if(d>Ot&&Math.abs(b)<he*.4){const Z=z?1:-1;if(Z>0&&O){A(f[s.length-1]);return}if(F&&Z<0&&q&&k(),E===null)return;A(f[E+Z]);return}A(J)}function W({draggedDistance:b}){if(V===null)return;const k=m==="bottom"||m==="right"?V-b:V+b;(m==="bottom"||m==="right")&&k<f[f.length-1]||(m==="top"||m==="left")&&k>f[f.length-1]||X(o.current,{transform:K(m)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`})}function re(b,k){if(!s||typeof E!="number"||!f||i===void 0)return null;const d=E===i-1;if(E>=i&&k)return 0;if(d&&!k)return 1;if(!B&&!d)return null;const u=d?E+1:E-1,Y=d?f[u]-f[u-1]:f[u+1]-f[u],F=b/Math.abs(Y);return d?1-F:F}return{isLastSnapPoint:O,activeSnapPoint:p,shouldFade:B,getPercentageDragged:re,setActiveSnapPoint:j,activeSnapPointIndex:E,onRelease:h,onDrag:W,snapPointsOffset:f}}const is=()=>()=>{};function ls(){const{direction:n,isOpen:r,shouldScaleBackground:s,setBackgroundColorOnScale:o,noBodyStyles:l}=qe(),i=c.useRef(null),w=C.useMemo(()=>document.body.style.backgroundColor,[]);function m(){return(window.innerWidth-pt)/window.innerWidth}c.useEffect(()=>{if(r&&s){i.current&&clearTimeout(i.current);const R=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!R)return;ns(o&&!l?lt(document.body,{background:"black"}):is,lt(R,{transformOrigin:K(n)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${H.DURATION}s`,transitionTimingFunction:`cubic-bezier(${H.EASE.join(",")})`}));const N=lt(R,{borderRadius:`${Pt}px`,overflow:"hidden",...K(n)?{transform:`scale(${m()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${m()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{N(),i.current=window.setTimeout(()=>{w?document.body.style.background=w:document.body.style.removeProperty("background")},H.DURATION*1e3)}}},[r,s,w])}let Ye=null;function cs({isOpen:n,modal:r,nested:s,hasBeenOpened:o,preventScrollRestoration:l,noBodyStyles:i}){const[w,m]=c.useState(()=>typeof window<"u"?window.location.href:""),R=c.useRef(0),N=c.useCallback(()=>{if(bt()&&Ye===null&&n&&!i){Ye={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:j,innerHeight:v}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-R.current}px`,left:`${-j}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const M=v-window.innerHeight;M&&R.current>=v&&(document.body.style.top=`${-(R.current+M)}px`)}),300)}},[n]),p=c.useCallback(()=>{if(bt()&&Ye!==null&&!i){const j=-parseInt(document.body.style.top,10),v=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Ye),window.requestAnimationFrame(()=>{if(l&&w!==window.location.href){m(window.location.href);return}window.scrollTo(v,j)}),Ye=null}},[w]);return c.useEffect(()=>{function j(){R.current=window.scrollY}return j(),window.addEventListener("scroll",j),()=>{window.removeEventListener("scroll",j)}},[]),c.useEffect(()=>{s||!o||(n?(!window.matchMedia("(display-mode: standalone)").matches&&N(),r||window.setTimeout(()=>{p()},500)):p())},[n,o,w,r,s,N,p]),{restorePositionSetting:p}}function Lt({open:n,onOpenChange:r,children:s,onDrag:o,onRelease:l,snapPoints:i,shouldScaleBackground:w=!1,setBackgroundColorOnScale:m=!0,closeThreshold:R=ss,scrollLockTimeout:N=as,dismissible:p=!0,handleOnly:j=!1,fadeFromIndex:v=i&&i.length-1,activeSnapPoint:M,setActiveSnapPoint:O,fixed:E,modal:B=!0,onClose:f,nested:V,noBodyStyles:A,direction:h="bottom",defaultOpen:W=!1,disablePreventScroll:re=!0,snapToSequentialPoint:b=!1,preventScrollRestoration:k=!1,repositionInputs:d=!0,onAnimationEnd:q,container:u,autoFocus:Y=!1}){var F,z;const[J=!1,he]=Mt({defaultProp:W,prop:n,onChange:g=>{r==null||r(g),!g&&!V&&Ke(),setTimeout(()=>{q==null||q(g)},H.DURATION*1e3),g&&!B&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),g||(document.body.style.pointerEvents="auto")}}),[Z,U]=c.useState(!1),[we,Ie]=c.useState(!1),[Se,Ae]=c.useState(!1),ve=c.useRef(null),ye=c.useRef(null),Re=c.useRef(null),be=c.useRef(null),S=c.useRef(null),Oe=c.useRef(!1),Pe=c.useRef(null),Fe=c.useRef(0),Ee=c.useRef(!1),He=c.useRef(0),y=c.useRef(null),Xe=c.useRef(((F=y.current)==null?void 0:F.getBoundingClientRect().height)||0),$e=c.useRef(((z=y.current)==null?void 0:z.getBoundingClientRect().width)||0),Ue=c.useRef(0),t=c.useCallback(g=>{i&&g===P.length-1&&(ye.current=new Date)},[]),{activeSnapPoint:a,activeSnapPointIndex:x,setActiveSnapPoint:T,onRelease:ne,snapPointsOffset:P,onDrag:Q,shouldFade:Ce,getPercentageDragged:Te}=os({snapPoints:i,activeSnapPointProp:M,setActiveSnapPointProp:O,drawerRef:y,fadeFromIndex:v,overlayRef:ve,onSnapPointChange:t,direction:h,container:u,snapToSequentialPoint:b});Kn({isDisabled:!J||we||!B||Se||!Z||!d||!re});const{restorePositionSetting:Ke}=cs({isOpen:J,modal:B,nested:V,hasBeenOpened:Z,preventScrollRestoration:k,noBodyStyles:A});function xe(){return(window.innerWidth-pt)/window.innerWidth}function Me(g){var D,$;!p&&!i||y.current&&!y.current.contains(g.target)||(Xe.current=((D=y.current)==null?void 0:D.getBoundingClientRect().height)||0,$e.current=(($=y.current)==null?void 0:$.getBoundingClientRect().width)||0,Ie(!0),Re.current=new Date,kt()&&window.addEventListener("touchend",()=>Oe.current=!1,{once:!0}),g.target.setPointerCapture(g.pointerId),Fe.current=K(h)?g.pageY:g.pageX)}function te(g,D){var $,L;let I=g;const oe=($=window.getSelection())==null?void 0:$.toString(),ee=y.current?et(y.current,h):null,se=new Date;if(I.hasAttribute("data-vaul-no-drag")||I.closest("[data-vaul-no-drag]"))return!1;if(h==="right"||h==="left")return!0;if(ye.current&&se.getTime()-ye.current.getTime()<500)return!1;if(ee!==null&&(h==="bottom"?ee>0:ee<0))return!0;if(oe&&oe.length>0)return!1;if(se.getTime()-((L=S.current)==null?void 0:L.getTime())<N&&ee===0||D)return S.current=se,!1;for(;I;){if(I.scrollHeight>I.clientHeight){if(I.scrollTop!==0)return S.current=new Date,!1;if(I.getAttribute("role")==="dialog")return!0}I=I.parentNode}return!0}function je(g){if(y.current&&we){const D=h==="bottom"||h==="right"?1:-1,$=(Fe.current-(K(h)?g.pageY:g.pageX))*D,L=$>0,I=i&&!p&&!L;if(I&&x===0)return;const oe=Math.abs($),ee=document.querySelector("[data-vaul-drawer-wrapper]"),se=h==="bottom"||h==="top"?Xe.current:$e.current;let ce=oe/se;const Le=Te(oe,L);if(Le!==null&&(ce=Le),I&&ce>=1||!Oe.current&&!te(g.target,L))return;if(y.current.classList.add(ct),Oe.current=!0,X(y.current,{transition:"none"}),X(ve.current,{transition:"none"}),i&&Q({draggedDistance:$}),L&&!i){const ge=ts($),Ge=Math.min(ge*-1,0)*D;X(y.current,{transform:K(h)?`translate3d(0, ${Ge}px, 0)`:`translate3d(${Ge}px, 0, 0)`});return}const De=1-ce;if((Ce||v&&x===v-1)&&(o==null||o(g,ce),X(ve.current,{opacity:`${De}`,transition:"none"},!0)),ee&&ve.current&&w){const ge=Math.min(xe()+ce*(1-xe()),1),Ge=8-ce*8,gt=Math.max(0,14-ce*14);X(ee,{borderRadius:`${Ge}px`,transform:K(h)?`scale(${ge}) translate3d(0, ${gt}px, 0)`:`scale(${ge}) translate3d(${gt}px, 0, 0)`,transition:"none"},!0)}if(!i){const ge=oe*D;X(y.current,{transform:K(h)?`translate3d(0, ${ge}px, 0)`:`translate3d(${ge}px, 0, 0)`})}}}c.useEffect(()=>{var g;function D(){if(!y.current||!d)return;const $=document.activeElement;if(ft($)||Ee.current){var L;const I=((L=window.visualViewport)==null?void 0:L.height)||0,oe=window.innerHeight;let ee=oe-I;const se=y.current.getBoundingClientRect().height||0,ce=se>oe*.8;Ue.current||(Ue.current=se);const Le=y.current.getBoundingClientRect().top;if(Math.abs(He.current-ee)>60&&(Ee.current=!Ee.current),i&&i.length>0&&P&&x){const De=P[x]||0;ee+=De}if(He.current=ee,se>I||Ee.current){const De=y.current.getBoundingClientRect().height;let ge=De;De>I&&(ge=I-(ce?Le:pt)),E?y.current.style.height=`${De-Math.max(ee,0)}px`:y.current.style.height=`${Math.max(ge,I-Le)}px`}else y.current.style.height=`${Ue.current}px`;i&&i.length>0&&!Ee.current?y.current.style.bottom="0px":y.current.style.bottom=`${Math.max(ee,0)}px`}}return(g=window.visualViewport)==null||g.addEventListener("resize",D),()=>{var $;return($=window.visualViewport)==null?void 0:$.removeEventListener("resize",D)}},[x,i,P]);function ke(g){Qt(),f==null||f(),g||he(!1),setTimeout(()=>{i&&T(i[0])},H.DURATION*1e3)}function xt(){if(!y.current)return;const g=document.querySelector("[data-vaul-drawer-wrapper]"),D=et(y.current,h);X(y.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${H.DURATION}s cubic-bezier(${H.EASE.join(",")})`}),X(ve.current,{transition:`opacity ${H.DURATION}s cubic-bezier(${H.EASE.join(",")})`,opacity:"1"}),w&&D&&D>0&&J&&X(g,{borderRadius:`${Pt}px`,overflow:"hidden",...K(h)?{transform:`scale(${xe()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${xe()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${H.DURATION}s`,transitionTimingFunction:`cubic-bezier(${H.EASE.join(",")})`},!0)}function Qt(){!we||!y.current||(y.current.classList.remove(ct),Oe.current=!1,Ie(!1),be.current=new Date)}function en(g){if(!we||!y.current)return;y.current.classList.remove(ct),Oe.current=!1,Ie(!1),be.current=new Date;const D=et(y.current,h);if(!te(g.target,!1)||!D||Number.isNaN(D)||Re.current===null)return;const $=be.current.getTime()-Re.current.getTime(),L=Fe.current-(K(h)?g.pageY:g.pageX),I=Math.abs(L)/$;if(I>.05&&(Ae(!0),setTimeout(()=>{Ae(!1)},200)),i){ne({draggedDistance:L*(h==="bottom"||h==="right"?1:-1),closeDrawer:ke,velocity:I,dismissible:p}),l==null||l(g,!0);return}if(h==="bottom"||h==="right"?L>0:L<0){xt(),l==null||l(g,!0);return}if(I>Ot){ke(),l==null||l(g,!1);return}var oe;const ee=Math.min((oe=y.current.getBoundingClientRect().height)!=null?oe:0,window.innerHeight);var se;const ce=Math.min((se=y.current.getBoundingClientRect().width)!=null?se:0,window.innerWidth),Le=h==="left"||h==="right";if(Math.abs(D)>=(Le?ce:ee)*R){ke(),l==null||l(g,!1);return}l==null||l(g,!0),xt()}c.useEffect(()=>(J&&(X(document.documentElement,{scrollBehavior:"auto"}),ye.current=new Date),()=>{es(document.documentElement,"scrollBehavior")}),[J]);function tn(g){const D=g?(window.innerWidth-_e)/window.innerWidth:1,$=g?-_e:0;Pe.current&&window.clearTimeout(Pe.current),X(y.current,{transition:`transform ${H.DURATION}s cubic-bezier(${H.EASE.join(",")})`,transform:`scale(${D}) translate3d(0, ${$}px, 0)`}),!g&&y.current&&(Pe.current=setTimeout(()=>{const L=et(y.current,h);X(y.current,{transition:"none",transform:K(h)?`translate3d(0, ${L}px, 0)`:`translate3d(${L}px, 0, 0)`})},500))}function nn(g,D){if(D<0)return;const $=(window.innerWidth-_e)/window.innerWidth,L=$+D*(1-$),I=-_e+D*_e;X(y.current,{transform:K(h)?`scale(${L}) translate3d(0, ${I}px, 0)`:`scale(${L}) translate3d(${I}px, 0, 0)`,transition:"none"})}function sn(g,D){const $=K(h)?window.innerHeight:window.innerWidth,L=D?($-_e)/$:1,I=D?-_e:0;D&&X(y.current,{transition:`transform ${H.DURATION}s cubic-bezier(${H.EASE.join(",")})`,transform:K(h)?`scale(${L}) translate3d(0, ${I}px, 0)`:`scale(${L}) translate3d(${I}px, 0, 0)`})}return c.createElement(yn,{defaultOpen:W,onOpenChange:g=>{!p&&!g||(g?U(!0):ke(!0),he(g))},open:J},c.createElement(Tt.Provider,{value:{activeSnapPoint:a,snapPoints:i,setActiveSnapPoint:T,drawerRef:y,overlayRef:ve,onOpenChange:r,onPress:Me,onRelease:en,onDrag:je,dismissible:p,handleOnly:j,isOpen:J,isDragging:we,shouldFade:Ce,closeDrawer:ke,onNestedDrag:nn,onNestedOpenChange:tn,onNestedRelease:sn,keyboardIsOpen:Ee,modal:B,snapPointsOffset:P,direction:h,shouldScaleBackground:w,setBackgroundColorOnScale:m,noBodyStyles:A,container:u,autoFocus:Y}},s))}const _t=c.forwardRef(function({...n},r){const{overlayRef:s,snapPoints:o,onRelease:l,shouldFade:i,isOpen:w,modal:m}=qe(),R=It(r,s),N=o&&o.length>0;return m?c.createElement(pn,{onMouseUp:l,ref:R,"data-vaul-overlay":"","data-vaul-snap-points":w&&N?"true":"false","data-vaul-snap-points-overlay":w&&i?"true":"false",...n}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});_t.displayName="Drawer.Overlay";const Bt=c.forwardRef(function({onPointerDownOutside:n,style:r,onOpenAutoFocus:s,...o},l){const{drawerRef:i,onPress:w,onRelease:m,onDrag:R,keyboardIsOpen:N,snapPointsOffset:p,modal:j,isOpen:v,direction:M,snapPoints:O,container:E,handleOnly:B,autoFocus:f}=qe(),[V,A]=c.useState(!1),h=It(l,i),W=c.useRef(null),re=c.useRef(null),b=c.useRef(!1),k=O&&O.length>0;ls();const d=(u,Y,F=0)=>{if(b.current)return!0;const z=Math.abs(u.y),J=Math.abs(u.x),he=J>z,Z=["bottom","right"].includes(Y)?1:-1;if(Y==="left"||Y==="right"){if(!(u.x*Z<0)&&J>=0&&J<=F)return he}else if(!(u.y*Z<0)&&z>=0&&z<=F)return!he;return b.current=!0,!0};c.useEffect(()=>{k&&window.requestAnimationFrame(()=>{A(!0)})},[]);function q(u){W.current=null,b.current=!1,m(u)}return c.createElement(hn,{"data-vaul-drawer-direction":M,"data-vaul-drawer":"","data-vaul-delayed-snap-points":V?"true":"false","data-vaul-snap-points":v&&k?"true":"false","data-vaul-custom-container":E?"true":"false",...o,ref:h,style:p&&p.length>0?{"--snap-point-height":`${p[0]}px`,...r}:r,onPointerDown:u=>{B||(o.onPointerDown==null||o.onPointerDown.call(o,u),W.current={x:u.pageX,y:u.pageY},w(u))},onOpenAutoFocus:u=>{s==null||s(u),f||u.preventDefault()},onPointerDownOutside:u=>{if(n==null||n(u),!j||u.defaultPrevented){u.preventDefault();return}N.current&&(N.current=!1)},onFocusOutside:u=>{if(!j){u.preventDefault();return}},onPointerMove:u=>{if(re.current=u,B||(o.onPointerMove==null||o.onPointerMove.call(o,u),!W.current))return;const Y=u.pageY-W.current.y,F=u.pageX-W.current.x,z=u.pointerType==="touch"?10:2;d({x:F,y:Y},M,z)?R(u):(Math.abs(F)>z||Math.abs(Y)>z)&&(W.current=null)},onPointerUp:u=>{o.onPointerUp==null||o.onPointerUp.call(o,u),W.current=null,b.current=!1,m(u)},onPointerOut:u=>{o.onPointerOut==null||o.onPointerOut.call(o,u),q(re.current)},onContextMenu:u=>{o.onContextMenu==null||o.onContextMenu.call(o,u),q(re.current)}})});Bt.displayName="Drawer.Content";const ds=250,us=120,Ht=c.forwardRef(function({preventCycle:n=!1,children:r,...s},o){const{closeDrawer:l,isDragging:i,snapPoints:w,activeSnapPoint:m,setActiveSnapPoint:R,dismissible:N,handleOnly:p,isOpen:j,onPress:v,onDrag:M}=qe(),O=c.useRef(null),E=c.useRef(!1);function B(){if(E.current){A();return}window.setTimeout(()=>{f()},us)}function f(){if(i||n||E.current){A();return}if(A(),(!w||w.length===0)&&N){l();return}if(m===w[w.length-1]&&N){l();return}const W=w.findIndex(b=>b===m);if(W===-1)return;const re=w[W+1];R(re)}function V(){O.current=window.setTimeout(()=>{E.current=!0},ds)}function A(){window.clearTimeout(O.current),E.current=!1}return c.createElement("div",{onClick:B,onPointerCancel:A,onPointerDown:h=>{p&&v(h),V()},onPointerMove:h=>{p&&M(h)},ref:o,"data-vaul-drawer-visible":j?"true":"false","data-vaul-handle":"","aria-hidden":"true",...s},c.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},r))});Ht.displayName="Drawer.Handle";function ms({onDrag:n,onOpenChange:r,...s}){const{onNestedDrag:o,onNestedOpenChange:l,onNestedRelease:i}=qe();if(!o)throw new Error("Drawer.NestedRoot must be placed in another drawer");return c.createElement(Lt,{nested:!0,onClose:()=>{l(!1)},onDrag:(w,m)=>{o(w,m),n==null||n(w,m)},onOpenChange:w=>{w&&l(w)},onRelease:i,...s})}function fs(n){const r=qe(),{container:s=r.container,...o}=n;return c.createElement(bn,{container:s,...o})}const Ne={Root:Lt,NestedRoot:ms,Content:Bt,Overlay:_t,Trigger:xn,Portal:fs,Handle:Ht,Close:gn,Title:wn,Description:vn},Ut=({shouldScaleBackground:n=!0,...r})=>e.jsx(Ne.Root,{shouldScaleBackground:n,...r});Ut.displayName="Drawer";const ps=Ne.Portal,Vt=C.forwardRef(({className:n,...r},s)=>e.jsx(Ne.Overlay,{ref:s,className:Be("fixed inset-0 z-50 bg-black/80",n),...r}));Vt.displayName=Ne.Overlay.displayName;const zt=C.forwardRef(({className:n,children:r,...s},o)=>e.jsxs(ps,{children:[e.jsx(Vt,{}),e.jsxs(Ne.Content,{ref:o,className:Be("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",n),...s,children:[e.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]}));zt.displayName="DrawerContent";const qt=({className:n,...r})=>e.jsx("div",{className:Be("grid gap-1.5 p-4 text-center sm:text-left",n),...r});qt.displayName="DrawerHeader";const Ft=C.forwardRef(({className:n,...r},s)=>e.jsx(Ne.Title,{ref:s,className:Be("text-lg font-semibold leading-none tracking-tight",n),...r}));Ft.displayName=Ne.Title.displayName;const hs=C.forwardRef(({className:n,...r},s)=>e.jsx(Ne.Description,{ref:s,className:Be("text-sm text-muted-foreground",n),...r}));hs.displayName=Ne.Description.displayName;var st="Switch",[xs,As]=an(st),[gs,ws]=xs(st),Wt=C.forwardRef((n,r)=>{const{__scopeSwitch:s,name:o,checked:l,defaultChecked:i,required:w,disabled:m,value:R="on",onCheckedChange:N,form:p,...j}=n,[v,M]=C.useState(null),O=Et(r,A=>M(A)),E=C.useRef(!1),B=v?p||!!v.closest("form"):!0,[f,V]=rn({prop:l,defaultProp:i??!1,onChange:N,caller:st});return e.jsxs(gs,{scope:s,checked:f,disabled:m,children:[e.jsx(Ct.button,{type:"button",role:"switch","aria-checked":f,"aria-required":w,"data-state":Gt(f),"data-disabled":m?"":void 0,disabled:m,value:R,...j,ref:O,onClick:on(n.onClick,A=>{V(h=>!h),B&&(E.current=A.isPropagationStopped(),E.current||A.stopPropagation())})}),B&&e.jsx(Kt,{control:v,bubbles:!E.current,name:o,value:R,checked:f,required:w,disabled:m,form:p,style:{transform:"translateX(-100%)"}})]})});Wt.displayName=st;var Yt="SwitchThumb",Xt=C.forwardRef((n,r)=>{const{__scopeSwitch:s,...o}=n,l=ws(Yt,s);return e.jsx(Ct.span,{"data-state":Gt(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:r})});Xt.displayName=Yt;var vs="SwitchBubbleInput",Kt=C.forwardRef(({__scopeSwitch:n,control:r,checked:s,bubbles:o=!0,...l},i)=>{const w=C.useRef(null),m=Et(w,i),R=kn(s),N=Dn(r);return C.useEffect(()=>{const p=w.current;if(!p)return;const j=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(j,"checked").set;if(R!==s&&M){const O=new Event("click",{bubbles:o});M.call(p,s),p.dispatchEvent(O)}},[R,s,o]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...l,tabIndex:-1,ref:m,style:{...l.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Kt.displayName=vs;function Gt(n){return n?"checked":"unchecked"}var Jt=Wt,ys=Xt;const Zt=C.forwardRef(({className:n,...r},s)=>e.jsx(Jt,{className:Be("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...r,ref:s,children:e.jsx(ys,{className:Be("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Zt.displayName=Jt.displayName;function St(n,r=6,s=4){return n.length<=r+s+1?n:`${n.slice(0,r)}…${n.slice(-s)}`}function dt(n,r){const s={month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"};return`${new Date(n).toLocaleString([],s)} → ${new Date(r).toLocaleString([],s)}`}function Ve(n){return`${Math.round(n*100)}%`}function pe(n){return n.toLocaleString()}function tt(n,r){const s=new Date,o=new Date(n),l=new Date(r);return s<o?"upcoming":s>=o&&s<=l?"live":"ended"}const Rt=/^((bc1|[13])[a-zA-HJ-NP-Z0-9]{25,62})$/,bs="/placeholder.svg",js=ln({name:de().trim().min(2,"Event name is required").max(120,"Event name must be 120 characters or less"),eventId:de().trim().min(6,"Event ID is required"),venue:de().trim().max(120,"Venue must be 120 characters or less").optional().or(cn("")),startsAt:de().min(1,"Start time is required"),endsAt:de().min(1,"End time is required"),capacity:de().trim().min(1,"Capacity is required").refine(n=>/^\d+$/.test(n),{message:"Capacity must be a whole number"}).refine(n=>{const r=Number(n);return r>=1&&r<=1e5},{message:"Capacity must be between 1 and 100,000"}),price:de().trim().min(1,"Price is required").refine(n=>/^\d+$/.test(n),{message:"Price must be a whole number"}).refine(n=>{const r=Number(n);return r>=1&&r<=1e8},{message:"Price must be between 1 and 100,000,000 sats"}),protocolAddr:de().trim().min(10,"Protocol address is required").refine(n=>Rt.test(n),{message:"Enter a valid Bitcoin address"}),venueSink:de().trim().min(10,"Venue sink address is required").refine(n=>Rt.test(n),{message:"Enter a valid Bitcoin address"}),issuerId:de().trim().min(3,"Issuer ID is required").max(120,"Issuer ID must be 120 characters or less"),resaleAllowed:dn(),royaltyBps:de().trim().min(1,"Royalty percent is required").refine(n=>/^\d+$/.test(n),{message:"Royalty must be whole number BPS"}).refine(n=>{const r=Number(n);return r>=0&&r<=1e4},{message:"Royalty BPS must be between 0 and 10000"})}).superRefine((n,r)=>{const s=new Date(n.startsAt),o=new Date(n.endsAt);if(Number.isNaN(s.getTime())){r.addIssue({code:Ze.custom,path:["startsAt"],message:"Start time must be a valid date"});return}if(s<=new Date&&r.addIssue({code:Ze.custom,path:["startsAt"],message:"Start time must be in the future"}),Number.isNaN(o.getTime())){r.addIssue({code:Ze.custom,path:["endsAt"],message:"End time must be a valid date"});return}o<=s&&r.addIssue({code:Ze.custom,path:["endsAt"],message:"End time must be after the start time"})}),nt={name:"",eventId:"",venue:"",startsAt:"",endsAt:"",capacity:"",price:"",protocolAddr:"",venueSink:"",issuerId:"",resaleAllowed:!0,royaltyBps:"0"},ut=[{key:"primary-0",lockingScriptHex:"",bps:1e4,id:"organizer"}],mt=[{key:"royalty-0",lockingScriptHex:"",bps:1e4,id:"issuer"}],Os=()=>{var Ue;const[n,r]=Pn(),[s,o]=C.useState({page:1,perPage:10}),[l,i]=C.useState(null),[w,m]=C.useState(!1),[R,N]=C.useState(!1);C.useState(!1);const[p,j]=C.useState("normal"),[v,M]=C.useState(!0),[O,E]=C.useState(ut),[B,f]=C.useState(mt),[V,A]=C.useState({}),[h,W]=C.useState(null),[re,b]=C.useState(null),k=C.useRef(null),d=un({resolver:fn(js),defaultValues:nt,mode:"onSubmit"}),q=d.watch("name"),u=d.watch("startsAt"),{isSubmitted:Y}=d.formState,F=t=>{const x={key:`${t}-${Date.now()}`,id:`${t}-${(t==="primary"?O:B).length}`,lockingScriptHex:"",bps:0};t==="primary"?E(T=>[...T,x]):f(T=>[...T,x])},z=(t,a,x,T)=>{const ne=P=>P.map(Q=>Q.key===a?{...Q,[x]:x==="bps"?Number(T):T}:Q);t==="primary"?E(ne):f(ne)},J=(t,a)=>{t==="primary"?E(x=>x.filter(T=>T.key!==a)):f(x=>x.filter(T=>T.key!==a))},he=O.reduce((t,a)=>t+Number(a.bps||0),0),Z=B.reduce((t,a)=>t+Number(a.bps||0),0);C.useEffect(()=>{if(!v)return;const t=Y,a=q==null?void 0:q.trim();if(!a){d.setValue("eventId","",{shouldValidate:t,shouldDirty:!1});return}const x=a.toLowerCase().replace(/[^a-z0-9]/g,"").slice(0,8);if(!x){d.setValue("eventId","",{shouldValidate:t,shouldDirty:!1});return}const T=`evt_${Date.now()}_${x}`;d.setValue("eventId",T,{shouldValidate:t,shouldDirty:!1})},[v,q,d,Y]),C.useEffect(()=>{const t=new URLSearchParams(window.location.search),a={page:1,perPage:10};t.get("q")&&(a.q=t.get("q"));const x=t.get("status");(x==="upcoming"||x==="live"||x==="ended")&&(a.status=x);const T=t.get("venue"),ne=t.get("min"),P=t.get("max"),Q=t.get("from"),Ce=t.get("to");T&&(a.venue=T),ne&&(a.min=Number.parseInt(ne,10)),P&&(a.max=Number.parseInt(P,10)),Q&&(a.from=Q),Ce&&(a.to=Ce);const Te=t.get("sort");Te&&["date_asc","date_desc","sold_desc","revenue_desc","fill_desc"].includes(Te)&&(a.sort=Te);const xe=t.get("page"),Me=t.get("perPage");xe&&(a.page=Number.parseInt(xe,10)||1),Me&&(a.perPage=Number.parseInt(Me,10)||10),o(a)},[]);const U=C.useCallback(t=>{const a=new URLSearchParams;Object.entries(t).forEach(([x,T])=>{T!==void 0&&T!==""&&a.set(x,T.toString())}),window.history.replaceState({},"",`${window.location.pathname}?${a.toString()}`),o(t)},[]),we=n.filter(t=>{var a,x;return!(s.q&&!t.name.toLowerCase().includes(s.q.toLowerCase())&&!t.eventId.toLowerCase().includes(s.q.toLowerCase())&&!((a=t.venue)!=null&&a.toLowerCase().includes(s.q.toLowerCase()))||s.status&&tt(t.startsAtISO,t.endsAtISO)!==s.status||s.venue&&!((x=t.venue)!=null&&x.toLowerCase().includes(s.venue.toLowerCase()))||s.min&&t.priceSats<s.min||s.max&&t.priceSats>s.max||s.from&&new Date(t.startsAtISO)<new Date(s.from)||s.to&&new Date(t.startsAtISO)>new Date(s.to))}).sort((t,a)=>{switch(s.sort||"date_desc"){case"date_asc":return new Date(t.startsAtISO).getTime()-new Date(a.startsAtISO).getTime();case"date_desc":return new Date(a.startsAtISO).getTime()-new Date(t.startsAtISO).getTime();case"sold_desc":return a.sold-t.sold;case"revenue_desc":return a.revenueSats-t.revenueSats;case"fill_desc":return a.sold/a.capacity-t.sold/t.capacity;default:return 0}}),Ie=we.length,Se=s.page||1,Ae=s.perPage||10,ve=Math.ceil(Ie/Ae),ye=(Se-1)*Ae,Re=we.slice(ye,ye+Ae),be={revenue:n.reduce((t,a)=>t+a.revenueSats,0),ticketsSold:n.reduce((t,a)=>t+a.sold,0),activeEvents:n.filter(t=>tt(t.startsAtISO,t.endsAtISO)==="live").length,fillRate:n.length?n.reduce((t,a)=>t+a.sold/a.capacity,0)/n.length:0,redemptionRate:n.reduce((t,a)=>t+a.sold,0)?n.reduce((t,a)=>t+a.redeemed,0)/n.reduce((t,a)=>t+a.sold,0):0},S=l?n.find(t=>t.eventId===l)??null:null,Oe=t=>{var T;const a=(T=t.target.files)==null?void 0:T[0];if(!a){b(null),W(null);return}if(!a.type.startsWith("image/")){b("Upload a valid image file"),t.target.value="";return}const x=new FileReader;x.onload=()=>{typeof x.result=="string"&&W(x.result),b(null)},x.readAsDataURL(a)},Pe=()=>{W(null),b(null),k.current&&(k.current.value="")},Fe=d.handleSubmit(async t=>{var Me;const a=Number(t.capacity),x=Number(t.price),T=te=>te.map(je=>{var ke;return{id:((ke=je.id)==null?void 0:ke.trim())||void 0,lockingScriptHex:je.lockingScriptHex.trim(),bps:Number(je.bps)}}),ne=O.reduce((te,je)=>te+Number(je.bps||0),0),P=B.reduce((te,je)=>te+Number(je.bps||0),0),Q={};if((!O.length||ne!==1e4)&&(Q.primary="Primary split must equal 10000 BPS"),(!B.length||P!==1e4)&&(Q.royalty="Royalty split must equal 10000 BPS"),Object.keys(Q).length){A(Q);return}A({});const Ce={resaleAllowed:t.resaleAllowed,royaltyBps:Number(t.royaltyBps),royaltyRecipients:T(B),primaryRecipients:T(O),version:"1",issuerId:t.issuerId.trim()},Te=jn(Ce),Ke=Nn(t.eventId.trim(),"template",Te),xe={eventId:t.eventId.trim(),name:t.name.trim(),venue:((Me=t.venue)==null?void 0:Me.trim())||"",startsAtISO:t.startsAt,endsAtISO:t.endsAt,capacity:a,priceSats:x,protocolAddr:t.protocolAddr.trim(),venueSink:t.venueSink.trim(),salesOpen:!0,sold:0,redeemed:0,revenueSats:0,policy:Ce,policyJson:Te,issuerSignature:Ke,imageUrl:h??void 0};r(te=>[...te,xe]),m(!1),Je({description:`Event created • id ${St(xe.eventId)}`}),d.reset(nt),M(!0),E(ut.map(te=>({...te}))),f(mt.map(te=>({...te}))),Pe()}),Ee=()=>{const t=["Event ID","Name","Venue","Start Date","End Date","Capacity","Sold","Revenue (sats)","Status"],a=we.map(P=>[P.eventId,P.name,P.venue||"",P.startsAtISO,P.endsAtISO,P.capacity,P.sold,P.revenueSats,tt(P.startsAtISO,P.endsAtISO)]),x=[t,...a].map(P=>P.map(Q=>`"${Q}"`).join(",")).join(`
`),T=new Blob([x],{type:"text/csv;charset=utf-8;"}),ne=document.createElement("a");ne.href=URL.createObjectURL(T),ne.download="organizer-events.csv",ne.click(),Je({description:"CSV exported successfully"})},He=t=>{if(!s.sort)return e.jsx(vt,{className:"w-3 h-3 ml-1"});const[a,x]=s.sort.includes("_asc")?[s.sort.replace("_asc",""),"asc"]:[s.sort.replace("_desc",""),"desc"];return a!==t?e.jsx(vt,{className:"w-3 h-3 ml-1"}):x==="asc"?e.jsx(_n,{className:"w-3 h-3 ml-1"}):e.jsx(Ln,{className:"w-3 h-3 ml-1"})},y=(t,a)=>{navigator.clipboard.writeText(t),Je({description:`${a} copied`})},Xe=t=>{r(a=>a.map(x=>x.eventId===t?{...x,salesOpen:!1}:x)),Je({description:"Sales closed"}),N(!1)},$e=t=>{const a=tt(t.startsAtISO,t.endsAtISO),x={upcoming:"bg-neo-contrast/10 text-neo-contrast/70",live:"bg-green-500 text-neo-contrast-inverse",ended:"bg-red-500 text-neo-contrast"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-mono uppercase ${x[a]}`,children:a})};return e.jsxs("div",{className:"min-h-screen bg-black text-white",children:[e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold uppercase",children:"ORGANIZER"}),e.jsxs(G,{variant:"neo",onClick:()=>m(!0),className:"font-mono uppercase w-full sm:w-auto",children:[e.jsx(rt,{className:"w-4 h-4 mr-2"}),"[ + CREATE EVENT ]"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[e.jsxs("div",{className:"border border-neo-border/20 rounded-md p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:pe(be.revenue)}),e.jsx("div",{className:"text-xs font-mono text-neo-contrast/60 uppercase",children:"REVENUE (SATS)"})]}),e.jsxs("div",{className:"border border-neo-border/20 rounded-md p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:pe(be.ticketsSold)}),e.jsx("div",{className:"text-xs font-mono text-neo-contrast/60 uppercase",children:"TICKETS SOLD"})]}),e.jsxs("div",{className:"border border-neo-border/20 rounded-md p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:be.activeEvents}),e.jsx("div",{className:"text-xs font-mono text-neo-contrast/60 uppercase",children:"ACTIVE EVENTS"})]}),e.jsxs("div",{className:"border border-neo-border/20 rounded-md p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:Ve(be.fillRate)}),e.jsx("div",{className:"text-xs font-mono text-neo-contrast/60 uppercase",children:"FILL RATE"})]}),e.jsxs("div",{className:"border border-neo-border/20 rounded-md p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:Ve(be.redemptionRate)}),e.jsx("div",{className:"text-xs font-mono text-neo-contrast/60 uppercase",children:"REDEMPTION RATE"})]})]}),e.jsxs("div",{className:"space-y-4 mb-6 p-4 border border-neo-border/20 rounded-md",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:flex-wrap",children:[e.jsxs("div",{className:"relative md:w-auto",children:[e.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/60"}),e.jsx(_,{placeholder:"Search events...",value:s.q||"",onChange:t=>U({...s,q:t.target.value}),className:"pl-10 font-mono w-full md:w-64"})]}),e.jsxs("select",{value:s.status||"",onChange:t=>{const a=t.target.value;if(a===""){U({...s,status:void 0});return}(a==="upcoming"||a==="live"||a==="ended")&&U({...s,status:a})},className:"px-3 py-2 bg-black border border-white/20 rounded-md font-mono text-sm w-full md:w-auto",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"live",children:"Live"}),e.jsx("option",{value:"ended",children:"Ended"})]}),e.jsx(_,{placeholder:"Venue filter...",value:s.venue||"",onChange:t=>U({...s,venue:t.target.value}),className:"font-mono w-full md:w-40"}),e.jsxs(G,{variant:"neo-outline",className:"font-mono uppercase text-xs w-full md:w-auto",onClick:Ee,children:[e.jsx(wt,{className:"w-3 h-3 mr-1"}),"[ EXPORT CSV ]"]})]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:flex-wrap md:items-center",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 md:flex-row md:items-center",children:[e.jsx($n,{className:"w-4 h-4 text-white/60"}),e.jsx(_,{placeholder:"Min price",type:"number",value:s.min||"",onChange:t=>U({...s,min:t.target.value?parseInt(t.target.value):void 0}),className:"font-mono w-full sm:w-24"}),e.jsx("span",{className:"text-neo-contrast/60",children:"-"}),e.jsx(_,{placeholder:"Max price",type:"number",value:s.max||"",onChange:t=>U({...s,max:t.target.value?parseInt(t.target.value):void 0}),className:"font-mono w-full sm:w-24"}),e.jsx("span",{className:"text-xs text-neo-contrast/60 font-mono",children:"sats"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 md:flex-row md:items-center",children:[e.jsx(Bn,{className:"w-4 h-4 text-white/60"}),e.jsx(_,{type:"date",value:s.from||"",onChange:t=>U({...s,from:t.target.value}),className:"font-mono w-full sm:w-36"}),e.jsx("span",{className:"text-neo-contrast/60",children:"-"}),e.jsx(_,{type:"date",value:s.to||"",onChange:t=>U({...s,to:t.target.value}),className:"font-mono w-full sm:w-36"})]}),e.jsxs("select",{value:s.perPage||10,onChange:t=>U({...s,perPage:parseInt(t.target.value),page:1}),className:"px-3 py-2 bg-black border border-white/20 rounded-md font-mono text-sm w-full md:w-auto",children:[e.jsx("option",{value:5,children:"5 per page"}),e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:25,children:"25 per page"}),e.jsx("option",{value:50,children:"50 per page"})]}),e.jsx(G,{variant:"neo-outline",onClick:()=>j(p==="compact"?"normal":"compact"),className:"font-mono uppercase text-xs w-full md:w-auto",children:p==="compact"?"NORMAL":"COMPACT"})]})]}),e.jsx("div",{className:"hidden md:block border border-white/20 rounded-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-neo-border/20",children:e.jsxs("tr",{className:"bg-neo-contrast/5",children:[e.jsx("th",{className:"text-left p-4 font-mono uppercase text-xs cursor-pointer hover:bg-neo-contrast/10 select-none",onClick:()=>U({...s,sort:s.sort==="date_asc"?"date_desc":"date_asc"}),"aria-sort":(Ue=s.sort)!=null&&Ue.includes("date")?s.sort.includes("asc")?"ascending":"descending":"none",children:e.jsxs("div",{className:"flex items-center",children:["EVENT / DATE",He("date")]})}),e.jsx("th",{className:"text-left p-4 font-mono uppercase text-xs",children:"VENUE"}),e.jsx("th",{className:"text-left p-4 font-mono uppercase text-xs cursor-pointer hover:bg-neo-contrast/10 select-none",onClick:()=>U({...s,sort:"fill_desc"}),"aria-sort":s.sort==="fill_desc"?"descending":"none",children:e.jsxs("div",{className:"flex items-center",children:["CAPACITY / SOLD",He("fill")]})}),e.jsx("th",{className:"text-left p-4 font-mono uppercase text-xs cursor-pointer hover:bg-neo-contrast/10 select-none",onClick:()=>U({...s,sort:"revenue_desc"}),"aria-sort":s.sort==="revenue_desc"?"descending":"none",children:e.jsxs("div",{className:"flex items-center",children:["REVENUE",He("revenue")]})}),e.jsx("th",{className:"text-left p-4 font-mono uppercase text-xs",children:"STATUS"})]})}),e.jsx("tbody",{children:Re.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-6 text-center text-sm font-mono text-white/60",children:"No events match the current filters."})}):Re.map(t=>e.jsxs("tr",{className:"border-b border-white/20 hover:bg-white/5 cursor-pointer ",onClick:()=>{i(t.eventId),N(!0)},onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),i(t.eventId),N(!0))},tabIndex:0,role:"button","aria-label":`View details for ${t.name}`,children:[e.jsxs("td",{className:p==="compact"?"p-2":"p-4",children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsx("div",{className:"text-xs font-mono text-white/60",children:dt(t.startsAtISO,t.endsAtISO)})]}),e.jsx("td",{className:`text-sm ${p==="compact"?"p-2":"p-4"}`,children:t.venue||"—"}),e.jsxs("td",{className:p==="compact"?"p-2":"p-4",children:[e.jsxs("div",{className:"font-mono",children:[pe(t.sold)," / ",pe(t.capacity)]}),e.jsxs("div",{className:"text-xs text-white/60",children:[Ve(t.sold/t.capacity)," filled"]})]}),e.jsxs("td",{className:`font-mono ${p==="compact"?"p-2":"p-4"}`,children:[pe(t.revenueSats)," sats"]}),e.jsx("td",{className:p==="compact"?"p-2":"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[$e(t),e.jsx(G,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:a=>{a.stopPropagation(),window.open(`/events/${t.eventId}`,"_blank","noopener,noreferrer")},onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),a.stopPropagation(),window.open(`/events/${t.eventId}`,"_blank","noopener,noreferrer"))},"aria-label":`Open public page for ${t.name}`,children:e.jsx(Mn,{className:"w-4 h-4","aria-hidden":"true"})})]})})]},t.eventId))})]})})}),e.jsxs("div",{className:"space-y-3 md:hidden",children:[Re.length===0&&e.jsx("div",{className:"border border-white/20 rounded-md p-4 bg-white/5 text-white/70 text-sm font-mono text-center",children:"No events match the current filters."}),Re.map(t=>e.jsxs("button",{type:"button",onClick:()=>{i(t.eventId),N(!0)},onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),i(t.eventId),N(!0))},className:"w-full text-left border border-white/20 rounded-lg bg-white/5 p-4 space-y-3 focus:outline-none focus:ring-2 focus:ring-neo-cyan",tabIndex:0,"aria-label":`View details for ${t.name}`,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("span",{className:"font-semibold text-base",children:t.name}),$e(t)]}),e.jsx("div",{className:"text-xs font-mono text-white/60",children:dt(t.startsAtISO,t.endsAtISO)}),e.jsxs("div",{className:"text-sm text-white/70",children:[e.jsx("span",{className:"font-mono text-white/60",children:"Venue:"})," ",t.venue||"—"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-mono text-sm",children:[pe(t.sold)," / ",pe(t.capacity)]}),e.jsxs("div",{className:"text-xs text-white/60",children:[Ve(t.sold/t.capacity)," filled"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-mono text-sm",children:[pe(t.revenueSats)," sats"]}),e.jsx("div",{className:"text-xs text-white/60",children:"Revenue"})]})]})]},t.eventId))]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-white/60 font-mono text-center sm:text-left",children:["Showing ",ye+1,"-",Math.min(ye+Ae,Ie)," of ",Ie," events"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(G,{variant:"neo-outline",size:"icon",disabled:Se===1,onClick:()=>U({...s,page:Se-1}),"aria-label":"Previous page",children:e.jsx(An,{className:"w-4 h-4"})}),e.jsxs("span",{className:"font-mono text-sm",children:["PAGE ",Se," OF ",ve]}),e.jsx(G,{variant:"neo-outline",size:"icon",disabled:Se===ve,onClick:()=>U({...s,page:Se+1}),"aria-label":"Next page",children:e.jsx(On,{className:"w-4 h-4"})})]})]})]}),e.jsx(Ut,{open:R,onOpenChange:N,children:e.jsxs(zt,{className:"bg-neo-contrast-inverse border-neo-border/20",children:[e.jsx(qt,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Ft,{className:"font-mono uppercase",children:S==null?void 0:S.name}),e.jsx("div",{className:"mt-2",children:S&&$e(S)})]}),e.jsx(G,{variant:"ghost",size:"icon",onClick:()=>N(!1),"aria-label":"Close details",children:e.jsx(at,{className:"w-4 h-4"})})]})}),S&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start",children:[e.jsx("div",{className:"w-full sm:w-56",children:e.jsx("div",{className:"relative aspect-video w-full overflow-hidden rounded-md border border-neo-border/20 bg-white/5",children:e.jsx("img",{src:S.imageUrl||bs,alt:`${S.name} artwork`,className:"h-full w-full object-cover"})})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:St(S.eventId)}),e.jsx(G,{variant:"ghost",size:"icon",onClick:()=>y(S.eventId,"Event ID"),"aria-label":"Copy event id",children:e.jsx(Sn,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"text-sm text-neo-contrast/60",children:S.venue}),e.jsx("div",{className:"text-sm text-neo-contrast/60 font-mono",children:dt(S.startsAtISO,S.endsAtISO)})]}),e.jsx("div",{children:$e(S)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold",children:[pe(S.sold)," / ",pe(S.capacity)]}),e.jsx("div",{className:"text-xs text-neo-contrast/60 font-mono uppercase",children:"SOLD / CAPACITY"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold",children:[pe(S.revenueSats)," sats"]}),e.jsx("div",{className:"text-xs text-neo-contrast/60 font-mono uppercase",children:"REVENUE"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:Ve(S.sold/S.capacity)}),e.jsx("div",{className:"text-xs text-neo-contrast/60 font-mono uppercase",children:"FILL RATE"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:Ve(S.sold?S.redeemed/S.sold:0)}),e.jsx("div",{className:"text-xs text-neo-contrast/60 font-mono uppercase",children:"REDEMPTION RATE"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Ticket Policy"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-sm font-mono text-neo-contrast/80",children:[e.jsxs("div",{children:["Resale: ",S.policy.resaleAllowed?"Allowed":"Disabled"]}),e.jsxs("div",{children:["Royalty: ",(S.policy.royaltyBps/100).toFixed(2),"%"]}),e.jsxs("div",{children:["Issuer ID: ",S.policy.issuerId]})]}),e.jsxs("div",{className:"text-xs font-mono text-neo-contrast/60 break-words",children:[e.jsx("div",{className:"uppercase tracking-wide text-neo-contrast/50 mb-1",children:"Policy JSON"}),S.policyJson]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-neo-contrast/50 uppercase font-mono mb-1",children:"Primary Split"}),e.jsx("div",{className:"space-y-1",children:S.policy.primaryRecipients.map((t,a)=>e.jsxs("div",{className:"text-xs font-mono text-neo-contrast/80",children:[t.id??`Recipient ${a+1}`," • ",t.bps/100,"% • ",t.lockingScriptHex]},`${t.lockingScriptHex}-${a}`))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-neo-contrast/50 uppercase font-mono mb-1",children:"Royalty Split"}),e.jsx("div",{className:"space-y-1",children:S.policy.royaltyRecipients.map((t,a)=>e.jsxs("div",{className:"text-xs font-mono text-neo-contrast/80",children:[t.id??`Recipient ${a+1}`," • ",t.bps/100,"% • ",t.lockingScriptHex]},`${t.lockingScriptHex}-${a}`))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-mono uppercase text-neo-contrast/60",children:"Recent Activity"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[{time:"2 min ago",action:"Ticket purchased by bc1q...7x8z"},{time:"5 min ago",action:"Ticket redeemed at entrance"},{time:"12 min ago",action:"Ticket transferred to bc1q...9a2b"},{time:"18 min ago",action:"Ticket purchased by bc1q...3c4d"}].map((t,a)=>e.jsxs("div",{className:"text-xs p-2 bg-neo-contrast/5 rounded border border-neo-border/10",children:[e.jsx("div",{className:"text-neo-contrast/60 font-mono",children:t.time}),e.jsx("div",{className:"text-neo-contrast/90",children:t.action})]},a))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{variant:"neo-outline",className:"w-full font-mono uppercase",onClick:()=>y(S.eventId,"Event ID"),children:"[ COPY EVENT ID ]"}),S.salesOpen&&e.jsx(G,{variant:"neo",className:"w-full font-mono uppercase",onClick:()=>Xe(S.eventId),children:"[ CLOSE SALES ]"}),e.jsxs(G,{variant:"neo-outline",className:"w-full font-mono uppercase",children:[e.jsx(wt,{className:"w-4 h-4 mr-2"}),"[ EXPORT TICKETS CSV ]"]})]})]})]})}),e.jsx(Rn,{open:w,onOpenChange:t=>{m(t),t||(d.reset(nt),M(!0),E(ut.map(a=>({...a}))),f(mt.map(a=>({...a}))),A({}),Pe())},children:e.jsxs(En,{className:"bg-black border-white/20 max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsx(Cn,{children:e.jsx(Tn,{className:"font-mono uppercase",children:"CREATE EVENT"})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:e.jsx(mn,{...d,children:e.jsxs("form",{onSubmit:Fe,className:"space-y-4 pb-6",children:[e.jsx(ie,{control:d.control,name:"name",render:({field:t})=>e.jsxs(le,{children:[e.jsx(ae,{children:"Event Name *"}),e.jsx(ue,{children:e.jsx(_,{...t,placeholder:"Bitcoin Conference 2025",className:"font-mono"})}),e.jsx(me,{})]})}),e.jsx(ie,{control:d.control,name:"eventId",render:({field:t})=>e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(ae,{className:"mb-0",children:"Event ID *"}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer text-xs text-white/60",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:a=>{M(a.target.checked),a.target.checked||d.setValue("eventId",t.value,{shouldDirty:!0})},className:"w-3 h-3"}),e.jsx("span",{children:"Auto-generate"})]})]}),e.jsx(ue,{children:e.jsx(_,{...t,placeholder:"evt_1234567890abcdef",className:"font-mono",disabled:v})}),e.jsx(fe,{children:"Unique identifier for this event"}),e.jsx(me,{})]})}),e.jsx(ie,{control:d.control,name:"venue",render:({field:t})=>e.jsxs(le,{children:[e.jsx(ae,{children:"Venue"}),e.jsx(ue,{children:e.jsx(_,{...t,placeholder:"Convention Center",className:"font-mono"})}),e.jsx(fe,{children:"Optional — helps guests identify the location."}),e.jsx(me,{})]})}),e.jsxs("div",{className:"space-y-3 border border-white/10 rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(ae,{className:"mb-0",children:"Event Image"}),e.jsx("p",{className:"text-xs text-white/60 font-mono",children:"Upload artwork to feature on marketplace and tickets."})]}),h?e.jsx(G,{type:"button",variant:"ghost",size:"icon",onClick:Pe,"aria-label":"Remove uploaded image",children:e.jsx(Un,{className:"w-4 h-4"})}):null]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsx("div",{className:"w-full sm:w-48",children:e.jsx("div",{className:"relative aspect-video w-full overflow-hidden rounded-md border border-white/15 bg-white/5",children:h?e.jsx("img",{src:h,alt:"Event artwork preview",className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full items-center justify-center text-white/50",children:e.jsx(Hn,{className:"w-10 h-10"})})})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(_,{ref:k,type:"file",accept:"image/*",onChange:Oe,"aria-label":"Upload event image",className:"font-mono"}),e.jsx("p",{className:"text-xs text-white/60 font-mono",children:"PNG, JPG, or GIF up to 5MB."}),re?e.jsx("p",{className:"text-xs text-red-400 font-mono",children:re}):null]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ie,{control:d.control,name:"startsAt",render:({field:t})=>e.jsxs(le,{children:[e.jsx(ae,{children:"Start Time *"}),e.jsx(ue,{children:e.jsx(_,{...t,type:"datetime-local",className:"font-mono",min:new Date().toISOString().slice(0,16)})}),e.jsx(fe,{children:"Must be in the future"}),e.jsx(me,{})]})}),e.jsx(ie,{control:d.control,name:"endsAt",render:({field:t})=>e.jsxs(le,{children:[e.jsx(ae,{children:"End Time *"}),e.jsx(ue,{children:e.jsx(_,{...t,type:"datetime-local",className:"font-mono",min:u||void 0})}),e.jsx(fe,{children:"Must be after start time"}),e.jsx(me,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ie,{control:d.control,name:"capacity",render:({field:t})=>e.jsxs(le,{children:[e.jsx(ae,{children:"Capacity *"}),e.jsx(ue,{children:e.jsx(_,{...t,inputMode:"numeric",placeholder:"500",className:"font-mono"})}),e.jsx(fe,{children:"Max 100,000 attendees"}),e.jsx(me,{})]})}),e.jsx(ie,{control:d.control,name:"price",render:({field:t})=>e.jsxs(le,{children:[e.jsx(ae,{children:"Price (sats) *"}),e.jsx(ue,{children:e.jsx(_,{...t,inputMode:"numeric",placeholder:"50000",className:"font-mono"})}),e.jsx(fe,{children:"Max 100M sats"}),e.jsx(me,{})]})})]}),e.jsx(ie,{control:d.control,name:"protocolAddr",render:({field:t})=>e.jsxs(le,{children:[e.jsx(ae,{children:"Protocol Address *"}),e.jsx(ue,{children:e.jsx(_,{...t,placeholder:"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh",className:"font-mono"})}),e.jsx(fe,{children:"Bitcoin address for protocol fees"}),e.jsx(me,{})]})}),e.jsx(ie,{control:d.control,name:"venueSink",render:({field:t})=>e.jsxs(le,{children:[e.jsx(ae,{children:"Venue Sink Address *"}),e.jsx(ue,{children:e.jsx(_,{...t,placeholder:"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh",className:"font-mono"})}),e.jsx(fe,{children:"Bitcoin address for venue payouts"}),e.jsx(me,{})]})}),e.jsx(ie,{control:d.control,name:"issuerId",render:({field:t})=>e.jsxs(le,{children:[e.jsx(ae,{children:"Issuer ID *"}),e.jsx(ue,{children:e.jsx(_,{...t,placeholder:"organizer-handle",className:"font-mono"})}),e.jsx(fe,{children:"Human-readable identifier published with your policy."}),e.jsx(me,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ie,{control:d.control,name:"resaleAllowed",render:({field:t})=>e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(ae,{className:"mb-0",children:"Allow Resale"}),e.jsx(Zt,{checked:t.value,onCheckedChange:a=>t.onChange(a)})]}),e.jsx(fe,{children:"Toggle off to make tickets non-transferable."})]})}),e.jsx(ie,{control:d.control,name:"royaltyBps",render:({field:t})=>e.jsxs(le,{children:[e.jsx(ae,{children:"Royalty (BPS)"}),e.jsx(ue,{children:e.jsx(_,{...t,inputMode:"numeric",type:"number",min:0,max:1e4,placeholder:"750",className:"font-mono"})}),e.jsx(fe,{children:"Basis points applied on each resale (10000 = 100%)."}),e.jsx(me,{})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-white/10 rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Primary Sale Split"}),e.jsx("p",{className:"text-xs text-white/60 font-mono",children:"Distributes mint proceeds immediately."})]}),e.jsxs(G,{type:"button",size:"sm",variant:"neo-outline",onClick:()=>F("primary"),children:[e.jsx(rt,{className:"w-3 h-3 mr-1"})," Add recipient"]})]}),e.jsxs("div",{className:"space-y-3",children:[O.map(t=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs text-white/60",children:"Identity Label"}),e.jsx(_,{value:t.id??"",onChange:a=>z("primary",t.key,"id",a.target.value),placeholder:"organizer",className:"font-mono"})]}),e.jsxs("div",{className:"md:col-span-6",children:[e.jsx("label",{className:"text-xs text-white/60",children:"Locking Script (hex)"}),e.jsx(_,{value:t.lockingScriptHex,onChange:a=>z("primary",t.key,"lockingScriptHex",a.target.value),placeholder:"76a914...88ac",className:"font-mono"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-white/60",children:"BPS"}),e.jsx(_,{type:"number",inputMode:"numeric",value:t.bps,onChange:a=>z("primary",t.key,"bps",a.target.value),className:"font-mono"})]}),e.jsx("div",{className:"md:col-span-1 flex justify-end",children:e.jsx(G,{type:"button",variant:"ghost",onClick:()=>J("primary",t.key),disabled:O.length===1,children:e.jsx(at,{className:"w-4 h-4"})})})]},t.key)),e.jsxs("div",{className:"text-xs font-mono text-white/60",children:["Total: ",he," BPS"]}),V.primary&&e.jsx("div",{className:"text-xs text-red-400",children:V.primary})]})]}),e.jsxs("div",{className:"border border-white/10 rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Royalty Split"}),e.jsx("p",{className:"text-xs text-white/60 font-mono",children:"Paid automatically on each resale."})]}),e.jsxs(G,{type:"button",size:"sm",variant:"neo-outline",onClick:()=>F("royalty"),children:[e.jsx(rt,{className:"w-3 h-3 mr-1"})," Add recipient"]})]}),e.jsxs("div",{className:"space-y-3",children:[B.map(t=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs text-white/60",children:"Identity Label"}),e.jsx(_,{value:t.id??"",onChange:a=>z("royalty",t.key,"id",a.target.value),placeholder:"artist",className:"font-mono"})]}),e.jsxs("div",{className:"md:col-span-6",children:[e.jsx("label",{className:"text-xs text-white/60",children:"Locking Script (hex)"}),e.jsx(_,{value:t.lockingScriptHex,onChange:a=>z("royalty",t.key,"lockingScriptHex",a.target.value),placeholder:"76a914...88ac",className:"font-mono"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-white/60",children:"BPS"}),e.jsx(_,{type:"number",inputMode:"numeric",value:t.bps,onChange:a=>z("royalty",t.key,"bps",a.target.value),className:"font-mono"})]}),e.jsx("div",{className:"md:col-span-1 flex justify-end",children:e.jsx(G,{type:"button",variant:"ghost",onClick:()=>J("royalty",t.key),disabled:B.length===1,children:e.jsx(at,{className:"w-4 h-4"})})})]},t.key)),e.jsxs("div",{className:"text-xs font-mono text-white/60",children:["Total: ",Z," BPS"]}),V.royalty&&e.jsx("div",{className:"text-xs text-red-400",children:V.royalty})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse gap-3 pt-4 md:flex-row md:gap-4",children:[e.jsx(G,{type:"button",variant:"neo-outline",onClick:()=>{m(!1),d.reset(nt),M(!0)},className:"flex-1 font-mono uppercase",children:"[ CANCEL ]"}),e.jsx(G,{type:"submit",variant:"neo",className:"flex-1 font-mono uppercase",children:"[ CREATE EVENT ]"})]})]})})})]})})]})};export{Os as default};
