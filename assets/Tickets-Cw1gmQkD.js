import{c as ae,r as T,j as s,B as H,t as Oe,n as yt,o as Nt,L as Ue,X as He}from"./index-Dli9Wo2m.js";import{S as $e}from"./ScanlineOverlay-BskGsIuD.js";import{b as Qe,D as je,a as Se,e as Ee,f as Te,g as Ge,c as vt,i as jt,d as St,C as Et}from"./ticketing-BTUPEBCn.js";import{I as Ze}from"./input-DH3yMiuo.js";import{L as We}from"./form-RzUEO6pt.js";import{A as Tt,S as oe,T as Ct,u as kt,a as It}from"./useAccessibility-CvzU2EmO.js";import{T as Rt,F as At,M as ze,S as _}from"./skeleton-DRI2Zvbq.js";import{B as Lt}from"./badge-z0IqO98x.js";import{u as Bt,a as Mt,g as Pt}from"./useLocalStorage-BfP0yHBA.js";import{D as Dt,a as _t}from"./download-B-sQkQPC.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ae("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=ae("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=ae("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);var Z={},Ht=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},et={},L={};let Ce;const $t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];L.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};L.getSymbolTotalCodewords=function(t){return $t[t]};L.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};L.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Ce=t};L.isKanjiModeEnabled=function(){return typeof Ce<"u"};L.toSJIS=function(t){return Ce(t)};var ce={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+i)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,n){if(e.isValid(r))return r;try{return t(r)}catch{return n}}})(ce);function tt(){this.buffer=[],this.length=0}tt.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let i=0;i<t;i++)this.putBit((e>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var zt=tt;function W(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}W.prototype.set=function(e,t,i,r){const n=e*this.size+t;this.data[n]=i,r&&(this.reservedBit[n]=!0)};W.prototype.get=function(e,t){return this.data[e*this.size+t]};W.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i};W.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Vt=W,nt={};(function(e){const t=L.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const n=Math.floor(r/7)+2,o=t(r),a=o===145?26:Math.ceil((o-13)/(2*n-2))*2,l=[o-7];for(let c=1;c<n-1;c++)l[c]=l[c-1]-a;return l.push(6),l.reverse()},e.getPositions=function(r){const n=[],o=e.getRowColCoords(r),a=o.length;for(let l=0;l<a;l++)for(let c=0;c<a;c++)l===0&&c===0||l===0&&c===a-1||l===a-1&&c===0||n.push([o[l],o[c]]);return n}})(nt);var st={};const Jt=L.getSymbolSize,Ve=7;st.getPositions=function(t){const i=Jt(t);return[[0,0],[i-Ve,0],[0,i-Ve]]};var ot={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},e.from=function(n){return e.isValid(n)?parseInt(n,10):void 0},e.getPenaltyN1=function(n){const o=n.size;let a=0,l=0,c=0,d=null,u=null;for(let g=0;g<o;g++){l=c=0,d=u=null;for(let x=0;x<o;x++){let m=n.get(g,x);m===d?l++:(l>=5&&(a+=t.N1+(l-5)),d=m,l=1),m=n.get(x,g),m===u?c++:(c>=5&&(a+=t.N1+(c-5)),u=m,c=1)}l>=5&&(a+=t.N1+(l-5)),c>=5&&(a+=t.N1+(c-5))}return a},e.getPenaltyN2=function(n){const o=n.size;let a=0;for(let l=0;l<o-1;l++)for(let c=0;c<o-1;c++){const d=n.get(l,c)+n.get(l,c+1)+n.get(l+1,c)+n.get(l+1,c+1);(d===4||d===0)&&a++}return a*t.N2},e.getPenaltyN3=function(n){const o=n.size;let a=0,l=0,c=0;for(let d=0;d<o;d++){l=c=0;for(let u=0;u<o;u++)l=l<<1&2047|n.get(d,u),u>=10&&(l===1488||l===93)&&a++,c=c<<1&2047|n.get(u,d),u>=10&&(c===1488||c===93)&&a++}return a*t.N3},e.getPenaltyN4=function(n){let o=0;const a=n.data.length;for(let c=0;c<a;c++)o+=n.data[c];return Math.abs(Math.ceil(o*100/a/5)-10)*t.N4};function i(r,n,o){switch(r){case e.Patterns.PATTERN000:return(n+o)%2===0;case e.Patterns.PATTERN001:return n%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(n+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return n*o%2+n*o%3===0;case e.Patterns.PATTERN110:return(n*o%2+n*o%3)%2===0;case e.Patterns.PATTERN111:return(n*o%3+(n+o)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(n,o){const a=o.size;for(let l=0;l<a;l++)for(let c=0;c<a;c++)o.isReserved(c,l)||o.xor(c,l,i(n,c,l))},e.getBestMask=function(n,o){const a=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let d=0;d<a;d++){o(d),e.applyMask(d,n);const u=e.getPenaltyN1(n)+e.getPenaltyN2(n)+e.getPenaltyN3(n)+e.getPenaltyN4(n);e.applyMask(d,n),u<c&&(c=u,l=d)}return l}})(ot);var le={};const F=ce,X=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ee=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];le.getBlocksCount=function(t,i){switch(i){case F.L:return X[(t-1)*4+0];case F.M:return X[(t-1)*4+1];case F.Q:return X[(t-1)*4+2];case F.H:return X[(t-1)*4+3];default:return}};le.getTotalCodewordsCount=function(t,i){switch(i){case F.L:return ee[(t-1)*4+0];case F.M:return ee[(t-1)*4+1];case F.Q:return ee[(t-1)*4+2];case F.H:return ee[(t-1)*4+3];default:return}};var rt={},de={};const Q=new Uint8Array(512),re=new Uint8Array(256);(function(){let t=1;for(let i=0;i<255;i++)Q[i]=t,re[t]=i,t<<=1,t&256&&(t^=285);for(let i=255;i<512;i++)Q[i]=Q[i-255]})();de.log=function(t){if(t<1)throw new Error("log("+t+")");return re[t]};de.exp=function(t){return Q[t]};de.mul=function(t,i){return t===0||i===0?0:Q[re[t]+re[i]]};(function(e){const t=de;e.mul=function(r,n){const o=new Uint8Array(r.length+n.length-1);for(let a=0;a<r.length;a++)for(let l=0;l<n.length;l++)o[a+l]^=t.mul(r[a],n[l]);return o},e.mod=function(r,n){let o=new Uint8Array(r);for(;o.length-n.length>=0;){const a=o[0];for(let c=0;c<n.length;c++)o[c]^=t.mul(n[c],a);let l=0;for(;l<o.length&&o[l]===0;)l++;o=o.slice(l)}return o},e.generateECPolynomial=function(r){let n=new Uint8Array([1]);for(let o=0;o<r;o++)n=e.mul(n,new Uint8Array([1,t.exp(o)]));return n}})(rt);const it=rt;function ke(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ke.prototype.initialize=function(t){this.degree=t,this.genPoly=it.generateECPolynomial(this.degree)};ke.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(t.length+this.degree);i.set(t);const r=it.mod(i,this.genPoly),n=this.degree-r.length;if(n>0){const o=new Uint8Array(this.degree);return o.set(r,n),o}return r};var Kt=ke,at={},O={},Ie={};Ie.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var P={};const ct="[0-9]+",qt="[A-Z $%*+\\-./:]+";let G="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";G=G.replace(/u/g,"\\u");const Yt="(?:(?![A-Z0-9 $%*+\\-./:]|"+G+`)(?:.|[\r
]))+`;P.KANJI=new RegExp(G,"g");P.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");P.BYTE=new RegExp(Yt,"g");P.NUMERIC=new RegExp(ct,"g");P.ALPHANUMERIC=new RegExp(qt,"g");const Qt=new RegExp("^"+G+"$"),Gt=new RegExp("^"+ct+"$"),Zt=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");P.testKanji=function(t){return Qt.test(t)};P.testNumeric=function(t){return Gt.test(t)};P.testAlphanumeric=function(t){return Zt.test(t)};(function(e){const t=Ie,i=P;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},e.getBestModeForData=function(o){return i.testNumeric(o)?e.NUMERIC:i.testAlphanumeric(o)?e.ALPHANUMERIC:i.testKanji(o)?e.KANJI:e.BYTE},e.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},e.isValid=function(o){return o&&o.bit&&o.ccBits};function r(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+n)}}e.from=function(o,a){if(e.isValid(o))return o;try{return r(o)}catch{return a}}})(O);(function(e){const t=L,i=le,r=ce,n=O,o=Ie,a=7973,l=t.getBCHDigit(a);function c(x,m,f){for(let p=1;p<=40;p++)if(m<=e.getCapacity(p,f,x))return p}function d(x,m){return n.getCharCountIndicator(x,m)+4}function u(x,m){let f=0;return x.forEach(function(p){const v=d(p.mode,m);f+=v+p.getBitsLength()}),f}function g(x,m){for(let f=1;f<=40;f++)if(u(x,f)<=e.getCapacity(f,m,n.MIXED))return f}e.from=function(m,f){return o.isValid(m)?parseInt(m,10):f},e.getCapacity=function(m,f,p){if(!o.isValid(m))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=n.BYTE);const v=t.getSymbolTotalCodewords(m),w=i.getTotalCodewordsCount(m,f),N=(v-w)*8;if(p===n.MIXED)return N;const b=N-d(p,m);switch(p){case n.NUMERIC:return Math.floor(b/10*3);case n.ALPHANUMERIC:return Math.floor(b/11*2);case n.KANJI:return Math.floor(b/13);case n.BYTE:default:return Math.floor(b/8)}},e.getBestVersionForData=function(m,f){let p;const v=r.from(f,r.M);if(Array.isArray(m)){if(m.length>1)return g(m,v);if(m.length===0)return 1;p=m[0]}else p=m;return c(p.mode,p.getLength(),v)},e.getEncodedBits=function(m){if(!o.isValid(m)||m<7)throw new Error("Invalid QR Code version");let f=m<<12;for(;t.getBCHDigit(f)-l>=0;)f^=a<<t.getBCHDigit(f)-l;return m<<12|f}})(at);var lt={};const we=L,dt=1335,Wt=21522,Je=we.getBCHDigit(dt);lt.getEncodedBits=function(t,i){const r=t.bit<<3|i;let n=r<<10;for(;we.getBCHDigit(n)-Je>=0;)n^=dt<<we.getBCHDigit(n)-Je;return(r<<10|n)^Wt};var ut={};const Xt=O;function $(e){this.mode=Xt.NUMERIC,this.data=e.toString()}$.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};$.prototype.getLength=function(){return this.data.length};$.prototype.getBitsLength=function(){return $.getBitsLength(this.data.length)};$.prototype.write=function(t){let i,r,n;for(i=0;i+3<=this.data.length;i+=3)r=this.data.substr(i,3),n=parseInt(r,10),t.put(n,10);const o=this.data.length-i;o>0&&(r=this.data.substr(i),n=parseInt(r,10),t.put(n,o*3+1))};var en=$;const tn=O,me=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function z(e){this.mode=tn.ALPHANUMERIC,this.data=e}z.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};z.prototype.getLength=function(){return this.data.length};z.prototype.getBitsLength=function(){return z.getBitsLength(this.data.length)};z.prototype.write=function(t){let i;for(i=0;i+2<=this.data.length;i+=2){let r=me.indexOf(this.data[i])*45;r+=me.indexOf(this.data[i+1]),t.put(r,11)}this.data.length%2&&t.put(me.indexOf(this.data[i]),6)};var nn=z;const sn=O;function V(e){this.mode=sn.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}V.getBitsLength=function(t){return t*8};V.prototype.getLength=function(){return this.data.length};V.prototype.getBitsLength=function(){return V.getBitsLength(this.data.length)};V.prototype.write=function(e){for(let t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)};var on=V;const rn=O,an=L;function J(e){this.mode=rn.KANJI,this.data=e}J.getBitsLength=function(t){return t*13};J.prototype.getLength=function(){return this.data.length};J.prototype.getBitsLength=function(){return J.getBitsLength(this.data.length)};J.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let i=an.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),e.put(i,13)}};var cn=J,ft={exports:{}};(function(e){var t={single_source_shortest_paths:function(i,r,n){var o={},a={};a[r]=0;var l=t.PriorityQueue.make();l.push(r,0);for(var c,d,u,g,x,m,f,p,v;!l.empty();){c=l.pop(),d=c.value,g=c.cost,x=i[d]||{};for(u in x)x.hasOwnProperty(u)&&(m=x[u],f=g+m,p=a[u],v=typeof a[u]>"u",(v||p>f)&&(a[u]=f,l.push(u,f),o[u]=d))}if(typeof n<"u"&&typeof a[n]>"u"){var w=["Could not find a path from ",r," to ",n,"."].join("");throw new Error(w)}return o},extract_shortest_path_from_predecessor_list:function(i,r){for(var n=[],o=r;o;)n.push(o),i[o],o=i[o];return n.reverse(),n},find_path:function(i,r,n){var o=t.single_source_shortest_paths(i,r,n);return t.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(i){var r=t.PriorityQueue,n={},o;i=i||{};for(o in r)r.hasOwnProperty(o)&&(n[o]=r[o]);return n.queue=[],n.sorter=i.sorter||r.default_sorter,n},default_sorter:function(i,r){return i.cost-r.cost},push:function(i,r){var n={value:i,cost:r};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(ft);var ln=ft.exports;(function(e){const t=O,i=en,r=nn,n=on,o=cn,a=P,l=L,c=ln;function d(w){return unescape(encodeURIComponent(w)).length}function u(w,N,b){const y=[];let j;for(;(j=w.exec(b))!==null;)y.push({data:j[0],index:j.index,mode:N,length:j[0].length});return y}function g(w){const N=u(a.NUMERIC,t.NUMERIC,w),b=u(a.ALPHANUMERIC,t.ALPHANUMERIC,w);let y,j;return l.isKanjiModeEnabled()?(y=u(a.BYTE,t.BYTE,w),j=u(a.KANJI,t.KANJI,w)):(y=u(a.BYTE_KANJI,t.BYTE,w),j=[]),N.concat(b,y,j).sort(function(k,R){return k.index-R.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function x(w,N){switch(N){case t.NUMERIC:return i.getBitsLength(w);case t.ALPHANUMERIC:return r.getBitsLength(w);case t.KANJI:return o.getBitsLength(w);case t.BYTE:return n.getBitsLength(w)}}function m(w){return w.reduce(function(N,b){const y=N.length-1>=0?N[N.length-1]:null;return y&&y.mode===b.mode?(N[N.length-1].data+=b.data,N):(N.push(b),N)},[])}function f(w){const N=[];for(let b=0;b<w.length;b++){const y=w[b];switch(y.mode){case t.NUMERIC:N.push([y,{data:y.data,mode:t.ALPHANUMERIC,length:y.length},{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.ALPHANUMERIC:N.push([y,{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.KANJI:N.push([y,{data:y.data,mode:t.BYTE,length:d(y.data)}]);break;case t.BYTE:N.push([{data:y.data,mode:t.BYTE,length:d(y.data)}])}}return N}function p(w,N){const b={},y={start:{}};let j=["start"];for(let C=0;C<w.length;C++){const k=w[C],R=[];for(let M=0;M<k.length;M++){const A=k[M],D=""+C+M;R.push(D),b[D]={node:A,lastCount:0},y[D]={};for(let U=0;U<j.length;U++){const B=j[U];b[B]&&b[B].node.mode===A.mode?(y[B][D]=x(b[B].lastCount+A.length,A.mode)-x(b[B].lastCount,A.mode),b[B].lastCount+=A.length):(b[B]&&(b[B].lastCount=A.length),y[B][D]=x(A.length,A.mode)+4+t.getCharCountIndicator(A.mode,N))}}j=R}for(let C=0;C<j.length;C++)y[j[C]].end=0;return{map:y,table:b}}function v(w,N){let b;const y=t.getBestModeForData(w);if(b=t.from(N,y),b!==t.BYTE&&b.bit<y.bit)throw new Error('"'+w+'" cannot be encoded with mode '+t.toString(b)+`.
 Suggested mode is: `+t.toString(y));switch(b===t.KANJI&&!l.isKanjiModeEnabled()&&(b=t.BYTE),b){case t.NUMERIC:return new i(w);case t.ALPHANUMERIC:return new r(w);case t.KANJI:return new o(w);case t.BYTE:return new n(w)}}e.fromArray=function(N){return N.reduce(function(b,y){return typeof y=="string"?b.push(v(y,null)):y.data&&b.push(v(y.data,y.mode)),b},[])},e.fromString=function(N,b){const y=g(N,l.isKanjiModeEnabled()),j=f(y),C=p(j,b),k=c.find_path(C.map,"start","end"),R=[];for(let M=1;M<k.length-1;M++)R.push(C.table[k[M]].node);return e.fromArray(m(R))},e.rawSplit=function(N){return e.fromArray(g(N,l.isKanjiModeEnabled()))}})(ut);const ue=L,ge=ce,dn=zt,un=Vt,fn=nt,hn=st,ye=ot,Ne=le,mn=Kt,ie=at,gn=lt,pn=O,pe=ut;function xn(e,t){const i=e.size,r=hn.getPositions(t);for(let n=0;n<r.length;n++){const o=r[n][0],a=r[n][1];for(let l=-1;l<=7;l++)if(!(o+l<=-1||i<=o+l))for(let c=-1;c<=7;c++)a+c<=-1||i<=a+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?e.set(o+l,a+c,!0,!0):e.set(o+l,a+c,!1,!0))}}function bn(e){const t=e.size;for(let i=8;i<t-8;i++){const r=i%2===0;e.set(i,6,r,!0),e.set(6,i,r,!0)}}function wn(e,t){const i=fn.getPositions(t);for(let r=0;r<i.length;r++){const n=i[r][0],o=i[r][1];for(let a=-2;a<=2;a++)for(let l=-2;l<=2;l++)a===-2||a===2||l===-2||l===2||a===0&&l===0?e.set(n+a,o+l,!0,!0):e.set(n+a,o+l,!1,!0)}}function yn(e,t){const i=e.size,r=ie.getEncodedBits(t);let n,o,a;for(let l=0;l<18;l++)n=Math.floor(l/3),o=l%3+i-8-3,a=(r>>l&1)===1,e.set(n,o,a,!0),e.set(o,n,a,!0)}function xe(e,t,i){const r=e.size,n=gn.getEncodedBits(t,i);let o,a;for(o=0;o<15;o++)a=(n>>o&1)===1,o<6?e.set(o,8,a,!0):o<8?e.set(o+1,8,a,!0):e.set(r-15+o,8,a,!0),o<8?e.set(8,r-o-1,a,!0):o<9?e.set(8,15-o-1+1,a,!0):e.set(8,15-o-1,a,!0);e.set(r-8,8,1,!0)}function Nn(e,t){const i=e.size;let r=-1,n=i-1,o=7,a=0;for(let l=i-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!e.isReserved(n,l-c)){let d=!1;a<t.length&&(d=(t[a]>>>o&1)===1),e.set(n,l-c,d),o--,o===-1&&(a++,o=7)}if(n+=r,n<0||i<=n){n-=r,r=-r;break}}}function vn(e,t,i){const r=new dn;i.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),pn.getCharCountIndicator(c.mode,e)),c.write(r)});const n=ue.getSymbolTotalCodewords(e),o=Ne.getTotalCodewordsCount(e,t),a=(n-o)*8;for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const l=(a-r.getLengthInBits())/8;for(let c=0;c<l;c++)r.put(c%2?17:236,8);return jn(r,e,t)}function jn(e,t,i){const r=ue.getSymbolTotalCodewords(t),n=Ne.getTotalCodewordsCount(t,i),o=r-n,a=Ne.getBlocksCount(t,i),l=r%a,c=a-l,d=Math.floor(r/a),u=Math.floor(o/a),g=u+1,x=d-u,m=new mn(x);let f=0;const p=new Array(a),v=new Array(a);let w=0;const N=new Uint8Array(e.buffer);for(let k=0;k<a;k++){const R=k<c?u:g;p[k]=N.slice(f,f+R),v[k]=m.encode(p[k]),f+=R,w=Math.max(w,R)}const b=new Uint8Array(r);let y=0,j,C;for(j=0;j<w;j++)for(C=0;C<a;C++)j<p[C].length&&(b[y++]=p[C][j]);for(j=0;j<x;j++)for(C=0;C<a;C++)b[y++]=v[C][j];return b}function Sn(e,t,i,r){let n;if(Array.isArray(e))n=pe.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const u=pe.rawSplit(e);d=ie.getBestVersionForData(u,i)}n=pe.fromString(e,d||40)}else throw new Error("Invalid data");const o=ie.getBestVersionForData(n,i);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const a=vn(t,i,n),l=ue.getSymbolSize(t),c=new un(l);return xn(c,t),bn(c),wn(c,t),xe(c,i,0),t>=7&&yn(c,t),Nn(c,a),isNaN(r)&&(r=ye.getBestMask(c,xe.bind(null,c,i))),ye.applyMask(r,c),xe(c,i,r),{modules:c,version:t,errorCorrectionLevel:i,maskPattern:r,segments:n}}et.create=function(t,i){if(typeof t>"u"||t==="")throw new Error("No input text");let r=ge.M,n,o;return typeof i<"u"&&(r=ge.from(i.errorCorrectionLevel,ge.M),n=ie.from(i.version),o=ye.from(i.maskPattern),i.toSJISFunc&&ue.setToSJISFunction(i.toSJISFunc)),Sn(t,n,r,o)};var ht={},Re={};(function(e){function t(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let r=i.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+i);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(o){return[o,o]}))),r.length===6&&r.push("F","F");const n=parseInt(r.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const n=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,o=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:o,scale:o?4:a,margin:n,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,n){return n.width&&n.width>=r+n.margin*2?n.width/(r+n.margin*2):n.scale},e.getImageWidth=function(r,n){const o=e.getScale(r,n);return Math.floor((r+n.margin*2)*o)},e.qrToImageData=function(r,n,o){const a=n.modules.size,l=n.modules.data,c=e.getScale(a,o),d=Math.floor((a+o.margin*2)*c),u=o.margin*c,g=[o.color.light,o.color.dark];for(let x=0;x<d;x++)for(let m=0;m<d;m++){let f=(x*d+m)*4,p=o.color.light;if(x>=u&&m>=u&&x<d-u&&m<d-u){const v=Math.floor((x-u)/c),w=Math.floor((m-u)/c);p=g[l[v*a+w]?1:0]}r[f++]=p.r,r[f++]=p.g,r[f++]=p.b,r[f]=p.a}}})(Re);(function(e){const t=Re;function i(n,o,a){n.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(o,a,l){let c=l,d=a;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),a||(d=r()),c=t.getOptions(c);const u=t.getImageWidth(o.modules.size,c),g=d.getContext("2d"),x=g.createImageData(u,u);return t.qrToImageData(x.data,o,c),i(g,d,u),g.putImageData(x,0,0),d},e.renderToDataURL=function(o,a,l){let c=l;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),c||(c={});const d=e.render(o,a,c),u=c.type||"image/png",g=c.rendererOpts||{};return d.toDataURL(u,g.quality)}})(ht);var mt={};const En=Re;function Ke(e,t){const i=e.a/255,r=t+'="'+e.hex+'"';return i<1?r+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':r}function be(e,t,i){let r=e+t;return typeof i<"u"&&(r+=" "+i),r}function Tn(e,t,i){let r="",n=0,o=!1,a=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),d=Math.floor(l/t);!c&&!o&&(o=!0),e[l]?(a++,l>0&&c>0&&e[l-1]||(r+=o?be("M",c+i,.5+d+i):be("m",n,0),n=0,o=!1),c+1<t&&e[l+1]||(r+=be("h",a),a=0)):n++}return r}mt.render=function(t,i,r){const n=En.getOptions(i),o=t.modules.size,a=t.modules.data,l=o+n.margin*2,c=n.color.light.a?"<path "+Ke(n.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+Ke(n.color.dark,"stroke")+' d="'+Tn(a,o,n.margin)+'"/>',u='viewBox="0 0 '+l+" "+l+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof r=="function"&&r(null,x),x};const Cn=Ht,ve=et,gt=ht,kn=mt;function Ae(e,t,i,r,n){const o=[].slice.call(arguments,1),a=o.length,l=typeof o[a-1]=="function";if(!l&&!Cn())throw new Error("Callback required as last argument");if(l){if(a<2)throw new Error("Too few arguments provided");a===2?(n=i,i=t,t=r=void 0):a===3&&(t.getContext&&typeof n>"u"?(n=r,r=void 0):(n=r,r=i,i=t,t=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(i=t,t=r=void 0):a===2&&!t.getContext&&(r=i,i=t,t=void 0),new Promise(function(c,d){try{const u=ve.create(i,r);c(e(u,t,r))}catch(u){d(u)}})}try{const c=ve.create(i,r);n(null,e(c,t,r))}catch(c){n(c)}}Z.create=ve.create;Z.toCanvas=Ae.bind(null,gt.render);Z.toDataURL=Ae.bind(null,gt.renderToDataURL);Z.toString=Ae.bind(null,function(e,t,i){return kn.render(e,i)});const In=({isOpen:e,onClose:t,onConfirm:i,ticketId:r,eventName:n,policy:o,sellerLockingScriptHex:a})=>{const[l,c]=T.useState(""),[d,u]=T.useState(!1),[g,x]=T.useState(!1),m=300,f=T.useMemo(()=>l?`76a914${l.replace(/[^0-9a-f]/gi,"").padEnd(40,"0").slice(0,40)}88ac`:"",[l]),p=T.useMemo(()=>f?Qe({salePriceSats:0,policy:o,sellerPayLockingScriptHex:a,buyerTicketLockingScriptHex:f}):null,[f,o,a]),v=async()=>{if(!l.trim()||!p)return;if(Math.random()<.4&&!g){x(!0);return}u(!0),await new Promise(b=>setTimeout(b,1500)),i(p,l),u(!1),c(""),x(!1),t()},w=()=>{x(!1),v()};return s.jsx(je,{open:e,onOpenChange:t,children:s.jsxs(Se,{className:"bg-neo-contrast-inverse border-neo-border/20 text-neo-contrast max-w-md max-h-[85vh] flex flex-col",children:[s.jsx(Ee,{children:s.jsx(Te,{className:"font-mono uppercase text-center",children:"TRANSFER TICKET"})}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:g?s.jsx(Tt,{onVerify:w,actionType:"transfer"}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-neo-contrast mb-1",children:n}),s.jsxs("p",{className:"text-sm text-neo-contrast/70 font-mono",children:["ID: ",r]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(We,{htmlFor:"recipient",className:"text-sm text-neo-contrast/70",children:"Recipient Address"}),s.jsx(Ze,{id:"recipient",value:l,onChange:N=>c(N.target.value),placeholder:"bc1q... or tb1q...",className:"font-mono text-sm bg-transparent border-neo-border/25 text-neo-contrast"})]}),s.jsx(oe,{className:"bg-neo-contrast/20"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Transfer Fee"}),s.jsx("span",{children:"FREE"})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Network Fee"}),s.jsxs("span",{children:[m.toLocaleString()," sats"]})]}),p&&s.jsx("div",{className:"text-xs text-neo-contrast/60 font-mono",children:"Ticket UTXO will move to buyer with new PushDrop policy."}),s.jsx(oe,{className:"bg-neo-contrast/20"}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"Total Cost"}),s.jsxs("span",{children:[m.toLocaleString()," sats"]})]})]}),s.jsxs("div",{className:"text-xs text-neo-contrast/60 font-mono",children:["⚠ Transfer is irreversible",s.jsx("br",{}),"✓ Recipient gets full ticket rights"]})]})}),s.jsxs(Ge,{className:"gap-2",children:[s.jsx(H,{variant:"neo-outline",onClick:t,disabled:d,className:"flex-1",children:"CANCEL"}),!g&&s.jsx(H,{variant:"neo",onClick:v,disabled:d||!l.trim()||!p,className:"flex-1",children:d?"TRANSFERRING...":"TRANSFER"})]})]})})},Rn=({isOpen:e,onClose:t,onConfirm:i,ticketId:r,eventName:n,originalPrice:o,policy:a,sellerLockingScriptHex:l})=>{const[c,d]=T.useState(o.toString()),[u,g]=T.useState(!1);T.useEffect(()=>{e&&d(o.toString())},[e,o]);const x=Number(c)||0,m=T.useMemo(()=>`76a914${Math.random().toString(16).slice(2,42).padEnd(40,"0").slice(0,40)}88ac`,[e]),f=T.useMemo(()=>x?Qe({salePriceSats:x,sellerPayLockingScriptHex:l,buyerTicketLockingScriptHex:m,policy:a}):null,[x,a,l,m]),p=Math.floor(x*.025||0),v=400,w=(f==null?void 0:f.royaltyTotal)??0,N=async()=>{f&&(g(!0),await new Promise(b=>setTimeout(b,1500)),i(f),g(!1),t())};return s.jsx(je,{open:e,onOpenChange:t,children:s.jsxs(Se,{className:"bg-neo-contrast-inverse border-neo-border/20 text-neo-contrast max-w-md max-h-[85vh] flex flex-col",children:[s.jsx(Ee,{children:s.jsx(Te,{className:"font-mono uppercase text-center",children:"LIST FOR SALE"})}),s.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto pr-1",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-neo-contrast mb-1",children:n}),s.jsxs("p",{className:"text-sm text-neo-contrast/70 font-mono",children:["ID: ",r]}),s.jsxs("p",{className:"text-sm text-neo-contrast/60",children:["Original: ",o.toLocaleString()," sats"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(We,{htmlFor:"price",className:"text-sm text-neo-contrast/70",children:"Sale Price (sats)"}),s.jsx(Ze,{id:"price",type:"number",value:c,onChange:b=>d(b.target.value),className:"font-mono text-sm bg-transparent border-neo-border/25 text-neo-contrast",min:"1"})]}),s.jsx(oe,{className:"bg-neo-contrast/20"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Royalty (",(a.royaltyBps/100).toFixed(2),"%)"]}),s.jsxs("span",{children:[w.toLocaleString()," sats"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Listing Fee (2.5%)"}),s.jsxs("span",{children:[p.toLocaleString()," sats"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Network Fee"}),s.jsxs("span",{children:[v.toLocaleString()," sats"]})]}),s.jsx(oe,{className:"bg-neo-contrast/20"}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"You Receive"}),s.jsxs("span",{children:[Math.max(x-w-p-v,0).toLocaleString()," sats"]})]})]}),f&&s.jsxs("div",{className:"text-xs text-neo-contrast/60 font-mono space-y-2",children:[s.jsx("div",{className:"uppercase tracking-wide text-neo-contrast/40",children:"Royalty Split"}),f.royaltyOutputs.length?f.royaltyOutputs.map((b,y)=>{var j;return s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:((j=a.royaltyRecipients[y])==null?void 0:j.id)??`Recipient ${y+1}`}),s.jsxs("span",{children:[b.satoshis.toLocaleString()," sats"]})]},`${b.lockingScript}-${y}`)}):s.jsx("div",{children:"No royalty due"})]}),s.jsxs("div",{className:"text-xs text-neo-contrast/60 font-mono",children:["✓ Policy-enforced royalties",s.jsx("br",{}),"✓ Split payouts included in transaction",s.jsx("br",{}),"✓ Instant payout on sale"]})]}),s.jsxs(Ge,{className:"gap-2",children:[s.jsx(H,{variant:"neo-outline",onClick:t,disabled:u,className:"flex-1",children:"CANCEL"}),s.jsx(H,{variant:"neo",onClick:N,disabled:u||!f,className:"flex-1",children:u?"LISTING...":"LIST FOR SALE"})]})]})})},pt=["event_cancelled","venue_issue","personal","technical","other"],An=e=>pt.includes(e),Ln=({isOpen:e,onClose:t,ticketId:i,eventName:r,priceSats:n})=>{const[o,a]=T.useState("other"),[l,c]=T.useState(""),[d,u]=T.useState(!1),g=async()=>{if(!l.trim()){Oe({description:"Please describe your refund request",variant:"destructive"});return}u(!0),await new Promise(v=>setTimeout(v,2e3));const f=JSON.parse(localStorage.getItem("refundRequests")||"[]"),p={ticketId:i,eventName:r,priceSats:n,reason:o,description:l,timestamp:new Date().toISOString(),status:"pending",id:Date.now().toString()};f.push(p),localStorage.setItem("refundRequests",JSON.stringify(f)),Oe({description:"Refund request submitted • We'll process within 24h"}),a("other"),c(""),u(!1),t()},x={event_cancelled:"Event Cancelled",venue_issue:"Venue Problems",personal:"Personal Emergency",technical:"Technical Issues",other:"Other Reason"},m=f=>{const p=f.target.value;An(p)&&a(p)};return s.jsx(je,{open:e,onOpenChange:t,children:s.jsxs(Se,{className:"bg-neo-contrast-inverse border-neo-border/20 max-w-md",children:[s.jsxs(Ee,{children:[s.jsxs(Te,{className:"font-mono uppercase text-sm flex items-center gap-2",children:[s.jsx(Ct,{className:"w-4 h-4 text-yellow-500"}),"REFUND REQUEST"]}),s.jsx("div",{className:"text-xs text-neo-contrast/60 font-mono mt-1",children:r}),s.jsxs("div",{className:"text-xs text-neo-contrast/60 font-mono",children:["Ticket: ",i.slice(0,12),"..."]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 border border-neo-border/20 rounded-md bg-neo-contrast/5",children:[s.jsx("div",{className:"text-sm font-mono text-neo-contrast/60",children:"REFUND AMOUNT"}),s.jsxs("div",{className:"text-lg font-bold font-mono",children:[n.toLocaleString()," sats"]}),s.jsx("div",{className:"text-xs text-neo-contrast/60",children:"Processing fee may apply"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-mono mb-2",children:"Refund Reason *"}),s.jsx("select",{value:o,onChange:m,className:"w-full px-3 py-2 bg-neo-contrast-inverse border border-neo-border/20 rounded-md font-mono text-sm",children:pt.map(f=>s.jsx("option",{value:f,children:x[f]},f))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-mono mb-2",children:"Description *"}),s.jsx(Rt,{value:l,onChange:f=>c(f.target.value),placeholder:"Please explain your refund request...",className:"min-h-[100px] font-mono text-sm",maxLength:300}),s.jsxs("div",{className:"text-xs text-neo-contrast/60 mt-1 font-mono",children:[l.length,"/300 characters"]})]}),s.jsxs("div",{className:"p-3 border border-neo-border/20 rounded-md bg-yellow-500/10",children:[s.jsx("div",{className:"text-xs font-mono text-yellow-500",children:"REFUND POLICY"}),s.jsx("div",{className:"text-xs text-neo-contrast/80 mt-1",children:"• Requests processed within 24 hours • Refunds sent to original payment method • 5% processing fee may apply • No refunds 2 hours before event start"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(H,{variant:"neo",onClick:g,disabled:d,className:"flex-1 font-mono uppercase",children:[s.jsx(Xe,{className:`w-4 h-4 mr-2 ${d?"animate-spin":""}`}),d?"[ PROCESSING... ]":"[ SUBMIT REQUEST ]"]}),s.jsx(H,{variant:"neo-outline",onClick:t,className:"font-mono uppercase",disabled:d,children:"[ CANCEL ]"})]})]})]})})},K={resaleAllowed:!0,royaltyBps:650,royaltyRecipients:[{id:"organizer",lockingScriptHex:"76a914aa11aa11aa11aa11aa11aa11aa11aa1188ac",bps:5e3},{id:"venue",lockingScriptHex:"76a914bb22bb22bb22bb22bb22bb22bb22bb2288ac",bps:3e3},{id:"artist",lockingScriptHex:"76a914cc33cc33cc33cc33cc33cc33cc33cc3388ac",bps:2e3}],primaryRecipients:[{id:"organizer",lockingScriptHex:"76a914dd44dd44dd44dd44dd44dd44dd44dd4488ac",bps:5500},{id:"venue",lockingScriptHex:"76a914ee55ee55ee55ee55ee55ee55ee55ee5588ac",bps:2500},{id:"production",lockingScriptHex:"76a914ff66ff66ff66ff66ff66ff66ff66ff6688ac",bps:1500},{id:"protocol",lockingScriptHex:"76a9141166778899aabbccddeeff0011223344556688ac",bps:500}],version:"1",issuerId:"demo_ticket_issuer"},Y=vt(K),te=jt(5e4,K),ne=St("evt_satellite_sessions","mock_ticket_satellite",Y),se=[{id:"mock_ticket_satellite",eventId:"evt_satellite_sessions",eventName:"SATELLITE SESSIONS VOL. 7",eventImageUrl:"https://images.unsplash.com/photo-1514525253161-7a46d19cd819?auto=format&fit=crop&w=1200&q=80",seat:"Loft Platform A2",validFrom:"2025-11-12T21:00:00Z",validTo:"2025-11-13T04:00:00Z",outpoint:"tx_mock_satellite:0",status:"VALID",priceInSats:42e3,pushDropFields:["1PushDropProtocolAddress","evt_satellite_sessions","mock_ticket_satellite",[14,28,77],"2025-11-12T21:00:00Z","2025-11-13T04:00:00Z",Y,ne],policy:K,policyJson:Y,issuerSignature:ne,provenance:[{txid:"tx_mock_satellite",salePriceSats:42e3,outputs:[{lockingScript:"76a914buyer00000000000000000000000000000088ac",satoshis:1,outputDescription:"Ticket output"},...te],type:"primary",timestampISO:"2025-10-01T00:00:00Z"}],lastTransferTx:{txid:"tx_mock_satellite",salePriceSats:42e3,outputs:[{lockingScript:"76a914buyer00000000000000000000000000000088ac",satoshis:1,outputDescription:"Ticket output"},...te],type:"primary",timestampISO:"2025-10-01T00:00:00Z"}},{id:"mock_ticket_arcade",eventId:"evt_arcade_sprint",eventName:"ARCADE SPRINT HACKATHON",eventImageUrl:"https://images.unsplash.com/photo-1526498460520-4c246339dccb?auto=format&fit=crop&w=1200&q=80",seat:"Pod C – Workstation 7",validFrom:"2025-10-24T18:00:00Z",validTo:"2025-10-26T18:00:00Z",outpoint:"tx_mock_arcade:0",status:"VALID",priceInSats:21e3,pushDropFields:["1PushDropProtocolAddress","evt_arcade_sprint","mock_ticket_arcade",[101,77,45,22],"2025-10-24T18:00:00Z","2025-10-26T18:00:00Z",Y,ne],policy:K,policyJson:Y,issuerSignature:ne,provenance:[{txid:"tx_mock_arcade",salePriceSats:21e3,outputs:[{lockingScript:"76a914builder000000000000000000000000000088ac",satoshis:1,outputDescription:"Ticket output"},...te],type:"primary",timestampISO:"2025-09-10T00:00:00Z"}],lastTransferTx:{txid:"tx_mock_arcade",salePriceSats:21e3,outputs:[{lockingScript:"76a914builder000000000000000000000000000088ac",satoshis:1,outputDescription:"Ticket output"},...te],type:"primary",timestampISO:"2025-09-10T00:00:00Z"}}],qe=e=>e.filter(t=>!!(t&&t.policy&&t.policyJson&&t.lastTransferTx)).map(t=>{var i;return{...t,eventId:t.eventId??(Array.isArray(t.pushDropFields)?t.pushDropFields[1]:""),provenance:(i=t.provenance)!=null&&i.length?t.provenance:[t.lastTransferTx]}}),Bn=({ticket:e,onClose:t})=>{const[i,r]=T.useState(""),[n,o]=T.useState(!1);T.useEffect(()=>{(async()=>{if(e)try{const u=await Z.toDataURL(e.outpoint,{width:512,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});r(u)}catch(u){console.error("QR code generation failed:",u)}})()},[e]);const a=()=>{if(i){const d=document.createElement("a");d.download=`ticket-${e==null?void 0:e.id}.png`,d.href=i,d.click()}},l=async()=>{if(navigator.share&&i)try{const u=await(await fetch(i)).blob(),g=new File([u],`ticket-${e==null?void 0:e.id}.png`,{type:"image/png"});await navigator.share({title:`Ticket: ${e==null?void 0:e.eventName}`,files:[g]})}catch(d){console.error("Share failed:",d)}},c=()=>{var d,u;o(!n),!n&&"wakeLock"in navigator&&((u=(d=navigator.wakeLock)==null?void 0:d.request)==null||u.call(d,"screen"))};return e?n?s.jsxs("div",{className:"fixed inset-0 z-50 bg-neo-contrast-inverse flex items-center justify-center",children:[s.jsx("button",{onClick:c,className:"absolute top-4 right-4 z-10 text-white hover:text-gray-300 flex h-12 w-12 items-center justify-center","aria-label":"Exit fullscreen",children:s.jsx(He,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex flex-col items-center justify-center p-8 max-w-md w-full",children:[s.jsx("div",{className:"bg-neo-contrast p-8 rounded-lg mb-6 shadow-2xl",children:i&&s.jsx("img",{src:i,alt:"Ticket QR Code",className:"w-full h-auto max-w-sm"})}),s.jsxs("div",{className:"text-center text-neo-contrast",children:[s.jsx("h2",{className:"font-bold text-xl mb-2",children:e.eventName}),s.jsx("p",{className:"text-neo-contrast/70",children:e.seat}),s.jsx("p",{className:"text-neo-contrast/60 text-sm font-mono mt-2",children:"Present to scanner at venue"})]})]})]}):s.jsx("div",{className:"fixed inset-0 z-50 bg-neo-contrast-inverse/80 backdrop-blur-sm flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-neo-contrast-inverse border-2 border-neo-border/20 rounded-lg max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-white font-mono uppercase",children:"Ticket QR"}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-300 flex h-10 w-10 items-center justify-center","aria-label":"Close modal",children:s.jsx(He,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"font-bold text-neo-contrast mb-1",children:e.eventName}),s.jsx("p",{className:"text-neo-contrast/70 text-sm",children:e.seat})]}),s.jsx("div",{className:"bg-neo-contrast p-4 rounded-lg",children:i?s.jsx("img",{src:i,alt:"Ticket QR Code",className:"w-full h-auto"}):s.jsx("div",{className:"aspect-square bg-gray-200 animate-pulse rounded"})}),s.jsxs("div",{className:"text-center text-xs text-neo-contrast/60 font-mono",children:["ID: ",e.id]}),s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[s.jsx("button",{onClick:c,className:"flex-1 min-w-[140px] bg-white text-black hover:bg-black hover:text-white border-2 border-white px-4 font-mono text-sm font-bold transition-colors h-12 flex items-center justify-center",children:"[ PRESENT ]"}),s.jsxs("button",{onClick:a,className:"flex-1 min-w-[140px] bg-transparent text-white hover:bg-white hover:text-black border-2 border-white/25 hover:border-white px-4 font-mono text-sm font-bold transition-colors h-12 flex items-center justify-center",children:[s.jsx(Dt,{className:"w-4 h-4 mr-1"}),"SAVE"]}),navigator.share&&s.jsxs("button",{onClick:l,className:"flex-1 min-w-[140px] bg-transparent text-white hover:bg-white hover:text-black border-2 border-white/25 hover:border-white px-4 font-mono text-sm font-bold transition-colors h-12 flex items-center justify-center",children:[s.jsx(Ut,{className:"w-4 h-4 mr-1"}),"SHARE"]})]})]})]})}):null},Mn=({status:e})=>{const i=(()=>{switch(e){case"VALID":return{text:"VALID",className:"bg-green-500 text-neo-contrast-inverse"};case"EXPIRED":return{text:"EXPIRED",className:"bg-red-500 text-neo-contrast"};case"REDEEMED":return{text:"REDEEMED",className:"bg-amber-500 text-neo-contrast-inverse"};case"NOT_YET_VALID":return{text:"NOT YET VALID",className:"bg-amber-500 text-neo-contrast-inverse"};default:return{text:"UNKNOWN",className:"bg-muted text-muted-foreground"}}})();return s.jsx(Lt,{className:`text-xs font-mono uppercase px-2 py-1 ${i.className}`,children:i.text})},Ye=({ticket:e,onViewQR:t,onRedeem:i,onCopyOutpoint:r,onTransfer:n,onListForSale:o,onFeedback:a,onRefund:l,onVisitEvent:c})=>{var m;const d=e.status==="VALID",u=e.status==="REDEEMED",g=((m=e.policy)==null?void 0:m.resaleAllowed)!==!1,x=()=>{const f=new Date(e.validFrom),p=new Date(e.validTo),v=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"});return f.toDateString()===p.toDateString()?`${v.format(f)} ${f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} - ${p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:`${v.format(f)} ${f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} - ${v.format(p)} ${p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`};return s.jsxs("div",{className:`border-2 rounded-lg p-4 transition-all ${d?"border-green-500/30 bg-green-500/5 shadow-[0_0_20px_rgba(34,197,94,0.1)]":"border-neo-border/20 bg-neo-contrast/5"}`,children:[s.jsx("button",{type:"button",onClick:c,onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),c())},className:"relative mb-4 rounded-md overflow-hidden w-full focus:outline-none focus:ring-2 focus:ring-neo-cyan text-left","aria-label":`Open event page for ${e.eventName}`,children:s.jsx("img",{src:e.eventImageUrl||"/placeholder.svg",alt:`${e.eventName} artwork`,className:"h-40 w-full object-cover"})}),s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("button",{type:"button",onClick:c,onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),c())},className:"font-bold text-neo-contrast mb-1 text-left hover:underline focus:outline-none focus:ring-2 focus:ring-neo-cyan","aria-label":`View event page for ${e.eventName}`,children:e.eventName}),s.jsx("p",{className:"text-neo-contrast/70 text-sm",children:e.seat})]}),s.jsx(Mn,{status:e.status})]}),s.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[s.jsxs("div",{className:"text-neo-contrast/70",children:[s.jsx("span",{className:"font-mono text-xs text-neo-contrast/50",children:"VALID:"})," ",x()]}),s.jsxs("div",{className:"text-neo-contrast/70",children:[s.jsx("span",{className:"font-mono text-xs text-neo-contrast/50",children:"OUTPOINT:"})," ",s.jsxs("button",{onClick:r,className:"font-mono hover:text-neo-contrast transition-colors inline-flex items-center gap-1","aria-label":"Copy outpoint",children:[e.outpoint,s.jsx(Et,{className:"w-3 h-3"})]})]}),e.priceInSats&&s.jsxs("div",{className:"text-neo-contrast/70",children:[s.jsx("span",{className:"font-mono text-xs text-neo-contrast/50",children:"PAID:"})," ",s.jsxs("span",{className:"font-mono",children:[e.priceInSats.toLocaleString()," sats"]})]}),e.policy&&s.jsxs("div",{className:"text-xs font-mono text-neo-contrast/60 space-y-1 border border-neo-border/10 rounded-md p-2",children:[s.jsx("div",{className:"uppercase text-neo-contrast/40",children:"Policy"}),s.jsxs("div",{children:["Resale: ",g?"Allowed":"Disabled"]}),s.jsxs("div",{children:["Royalty: ",(e.policy.royaltyBps/100).toFixed(2),"%"]}),s.jsxs("div",{children:["Issuer: ",e.policy.issuerId]})]})]}),s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[s.jsxs("button",{onClick:t,className:"flex-1 min-w-[140px] bg-white text-black hover:bg-black hover:text-white border-2 border-white px-4 font-mono text-sm font-bold transition-all shadow-[2px_2px_0_0_white] hover:shadow-[1px_1px_0_0_white] active:translate-x-[1px] active:translate-y-[1px] h-12 flex items-center justify-center",children:[s.jsx(Ft,{className:"w-4 h-4 mr-1"}),"QR"]}),d&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:i,className:"flex-1 min-w-[140px] bg-green-500 text-black hover:bg-black hover:text-green-500 border-2 border-green-500 px-4 font-mono text-sm font-bold transition-all h-12 flex items-center justify-center",children:"REDEEM"}),s.jsx("button",{onClick:n,className:`flex items-center justify-center h-12 w-12 bg-transparent text-white border-2 font-mono text-sm font-bold transition-all rounded-md ${g?"hover:bg-white hover:text-black border-white/25 hover:border-white":"border-white/10 text-white/30 cursor-not-allowed"}`,"aria-label":"Transfer ticket",disabled:!g,title:g?"Transfer ticket":"Resale disabled by issuer",children:s.jsx(Ot,{className:"w-4 h-4"})}),s.jsx("button",{onClick:o,className:`flex items-center justify-center h-12 w-12 bg-transparent text-white border-2 font-mono text-sm font-bold transition-all rounded-md ${g?"hover:bg-white hover:text-black border-white/25 hover:border-white":"border-white/10 text-white/30 cursor-not-allowed"}`,"aria-label":"List for sale",disabled:!g,title:g?"List for compliant resale":"Resale disabled by issuer",children:s.jsx(_t,{className:"w-4 h-4"})}),s.jsx("button",{onClick:a,className:"flex items-center justify-center h-12 w-12 bg-transparent text-white hover:bg-white hover:text-black border-2 border-white/25 hover:border-white font-mono text-sm font-bold transition-all rounded-md","aria-label":"Leave feedback",children:s.jsx(ze,{className:"w-4 h-4"})}),s.jsx("button",{onClick:l,className:"flex items-center justify-center h-12 w-12 bg-transparent text-white hover:bg-white hover:text-black border-2 border-white/25 hover:border-white font-mono text-sm font-bold transition-all rounded-md","aria-label":"Request refund",children:s.jsx(Xe,{className:"w-4 h-4"})})]}),u&&s.jsx("button",{onClick:a,className:"flex items-center justify-center h-12 w-12 bg-transparent text-white hover:bg-white hover:text-black border-2 border-white/25 hover:border-white font-mono text-sm font-bold transition-all rounded-md","aria-label":"Leave feedback",children:s.jsx(ze,{className:"w-4 h-4"})})]})]})},Pn=()=>s.jsx("div",{className:"border border-neo-border/10 rounded-lg p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx(_,{className:"h-6 w-48 bg-neo-contrast/10"}),s.jsx(_,{className:"h-5 w-16 bg-neo-contrast/10"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(_,{className:"h-4 w-32 bg-neo-contrast/10"}),s.jsx(_,{className:"h-4 w-40 bg-neo-contrast/10"}),s.jsx(_,{className:"h-4 w-36 bg-neo-contrast/10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(_,{className:"h-8 w-20 bg-neo-contrast/10"}),s.jsx(_,{className:"h-8 w-20 bg-neo-contrast/10"}),s.jsx(_,{className:"h-8 w-20 bg-neo-contrast/10"})]})]})}),Kn=()=>{var Le,Be,Me,Pe,De,_e,Fe;const[e,t]=Bt(),[i]=Mt(),r=qe(e),n=t,[o,a]=T.useState(!0),[l,c]=T.useState(null),[d,u]=T.useState({isOpen:!1,ticket:null}),[g,x]=T.useState({isOpen:!1,ticket:null}),[m,f]=T.useState({isOpen:!1,ticket:null}),[p,v]=T.useState({isOpen:!1,ticket:null}),{toast:w}=yt();kt();const{announce:N}=It(),[b,y]=T.useState([...se,...r]),j=Nt();T.useEffect(()=>{try{const h=window.localStorage.getItem("ticketBastardLedger"),E=h?JSON.parse(h):[];let S=!1;se.forEach(I=>{E.find(q=>q.ticketId===I.id)||(E.push({ticketId:I.id,eventId:I.eventId,outpoint:I.outpoint,tx:I.lastTransferTx,policy:I.policy,policyJson:I.policyJson,issuerSignature:I.issuerSignature}),S=!0)}),S&&window.localStorage.setItem("ticketBastardLedger",JSON.stringify(E))}catch(h){console.error("Failed to seed ledger",h)}},[]),T.useEffect(()=>{const h=qe(e).map(S=>{if(S.eventImageUrl)return S;const I=Pt(i,S.eventId),q=se.find(wt=>wt.eventId===S.eventId);return{...S,eventImageUrl:(I==null?void 0:I.imageUrl)??(q==null?void 0:q.eventImageUrl)}}),E=[...se,...h];y(E)},[e,i]),T.useEffect(()=>{const h=setTimeout(()=>a(!1),1e3);return()=>clearTimeout(h)},[]);const C=h=>{c(h)},k=h=>{y(E=>E.map(S=>S.id===h.id?{...S,status:"REDEEMED"}:S)),n(E=>E.map(S=>S.id===h.id?{...S,status:"REDEEMED"}:S)),N(`${h.eventName} ticket has been redeemed`),w({title:"Ticket Redeemed",description:`${h.eventName} ticket has been redeemed`})},R=h=>`76a914${h.id.replace(/[^0-9a-f]/gi,"").padEnd(40,"0").slice(0,40)}88ac`,M=async h=>{try{await navigator.clipboard.writeText(h.outpoint),w({title:"Copied",description:"Outpoint copied to clipboard"})}catch(E){console.error("Failed to copy outpoint:",E)}},A=h=>{var E;if(((E=h.policy)==null?void 0:E.resaleAllowed)===!1){w({title:"Transfer blocked",description:"The issuer has disabled secondary transfers for this ticket."});return}u({isOpen:!0,ticket:h})},D=h=>{var E;if(((E=h.policy)==null?void 0:E.resaleAllowed)===!1){w({title:"Resale disabled",description:"The issuer forbids resales for this ticket."});return}x({isOpen:!0,ticket:h})},U=h=>{f({isOpen:!0,ticket:h})},B=h=>{v({isOpen:!0,ticket:h})},xt=(h,E)=>{if(d.ticket){y(S=>S.filter(I=>I.id!==d.ticket.id)),n(S=>S.filter(I=>I.id!==d.ticket.id));try{const S=window.localStorage.getItem("ticketBastardLedger"),I=S?JSON.parse(S):[];I.push({ticketId:d.ticket.id,eventId:d.ticket.eventId??(Array.isArray(d.ticket.pushDropFields)?d.ticket.pushDropFields[1]:""),outpoint:`${h.tx.txid}:0`,tx:h.tx,policy:d.ticket.policy,policyJson:d.ticket.policyJson,issuerSignature:d.ticket.issuerSignature}),window.localStorage.setItem("ticketBastardLedger",JSON.stringify(I))}catch(S){console.error("Failed to persist transfer ledger entry",S)}w({title:"Ticket Transferred",description:`Transferred to ${E.slice(0,8)}...`})}},bt=h=>{if(g.ticket){y(E=>E.filter(S=>S.id!==g.ticket.id)),n(E=>E.filter(S=>S.id!==g.ticket.id));try{const E=window.localStorage.getItem("ticketBastardListings"),S=E?JSON.parse(E):[];S.push({ticketId:g.ticket.id,eventId:g.ticket.eventId??(Array.isArray(g.ticket.pushDropFields)?g.ticket.pushDropFields[1]:""),tx:h.tx,policy:g.ticket.policy,policyJson:g.ticket.policyJson,royaltyOutputs:h.royaltyOutputs,sellerOutput:h.sellerOutput}),window.localStorage.setItem("ticketBastardListings",JSON.stringify(S))}catch(E){console.error("Failed to persist listing preview",E)}w({title:"Listed for Sale",description:`Listed at ${h.tx.salePriceSats.toLocaleString()} sats`})}},fe=b.filter(h=>h.status==="VALID"),he=b.filter(h=>h.status==="REDEEMED");return o?s.jsxs("div",{className:"min-h-screen",children:[s.jsx($e,{}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-8",children:s.jsx("h1",{className:"text-3xl font-bold font-mono tracking-wider text-white uppercase",children:"MY TICKETS"})}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:[...Array(4)].map((h,E)=>s.jsx(Pn,{},E))})]})]}):s.jsxs("div",{className:"min-h-screen",children:[s.jsx($e,{}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10",children:[s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold font-mono tracking-wider text-white uppercase",children:"MY TICKETS"}),s.jsx(Ue,{to:"/marketplace",className:"inline-flex h-12 items-center justify-center bg-white text-black hover:bg-black hover:text-white border-2 border-white px-6 font-mono text-sm font-bold transition-all shadow-[2px_2px_0_0_white] hover:shadow-[1px_1px_0_0_white] active:translate-x-[1px] active:translate-y-[1px] no-underline",children:"[ PURCHASE TICKETS ]"})]}),fe.length===0&&he.length===0?s.jsx("div",{className:"text-center py-16",children:s.jsxs("div",{className:"border-2 border-white/20 rounded-lg p-8 max-w-md mx-auto bg-white/5",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"No Tickets Found"}),s.jsx("p",{className:"text-white/70 mb-6",children:"You don't have any tickets yet. Purchase some from the marketplace to get started."}),s.jsx(Ue,{to:"/marketplace",className:"inline-flex h-12 items-center justify-center bg-white text-black hover:bg-black hover:text-white border-2 border-white px-6 font-mono text-sm font-bold transition-all shadow-[2px_2px_0_0_white] hover:shadow-[1px_1px_0_0_white] active:translate-x-[1px] active:translate-y-[1px] no-underline",children:"[ BROWSE MARKETPLACE ]"})]})}):s.jsxs(s.Fragment,{children:[fe.length>0&&s.jsxs("div",{className:"mb-12",children:[s.jsx("h2",{className:"text-xl font-bold text-neo-contrast mb-6 font-mono uppercase",children:"Active Tickets"}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:fe.map(h=>s.jsx(Ye,{ticket:h,onViewQR:()=>C(h),onRedeem:()=>k(h),onCopyOutpoint:()=>M(h),onTransfer:()=>A(h),onListForSale:()=>D(h),onFeedback:()=>U(h),onRefund:()=>B(h),onVisitEvent:()=>j(`/events/${h.eventId}`)},h.id))})]}),he.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-neo-contrast mb-6 font-mono uppercase",children:"History"}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:he.map(h=>s.jsx(Ye,{ticket:h,onViewQR:()=>C(h),onRedeem:()=>k(h),onCopyOutpoint:()=>M(h),onTransfer:()=>A(h),onListForSale:()=>D(h),onFeedback:()=>U(h),onRefund:()=>B(h),onVisitEvent:()=>j(`/events/${h.eventId}`)},h.id))})]})]})]}),s.jsx(Bn,{ticket:l,onClose:()=>c(null)}),s.jsx(In,{isOpen:d.isOpen,onClose:()=>u({isOpen:!1,ticket:null}),onConfirm:xt,ticketId:((Le=d.ticket)==null?void 0:Le.id)||"",eventName:((Be=d.ticket)==null?void 0:Be.eventName)||"",policy:((Me=d.ticket)==null?void 0:Me.policy)||K,sellerLockingScriptHex:d.ticket?R(d.ticket):""}),s.jsx(Rn,{isOpen:g.isOpen,onClose:()=>x({isOpen:!1,ticket:null}),onConfirm:bt,ticketId:((Pe=g.ticket)==null?void 0:Pe.id)||"",eventName:((De=g.ticket)==null?void 0:De.eventName)||"",originalPrice:((_e=g.ticket)==null?void 0:_e.priceInSats)||0,policy:((Fe=g.ticket)==null?void 0:Fe.policy)||K,sellerLockingScriptHex:g.ticket?R(g.ticket):""}),m.ticket&&s.jsx(At,{isOpen:m.isOpen,onClose:()=>f({isOpen:!1,ticket:null}),eventName:m.ticket.eventName,eventId:m.ticket.id}),p.ticket&&s.jsx(Ln,{isOpen:p.isOpen,onClose:()=>v({isOpen:!1,ticket:null}),ticketId:p.ticket.id,eventName:p.ticket.eventName,priceSats:p.ticket.priceInSats||0})]})};export{Kn as default};
