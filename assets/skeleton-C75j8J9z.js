import{c as v,r as y,j as e,m as k,t as M,B as g}from"./index-Dcx6mcxo.js";import{o as I,n as L,e as R,s as j,u as B,F as O,a as i,b as c,c as m,d,f as x,g as A,t as $}from"./form-BAh0T6MO.js";import{D as V,a as H,e as J,f as K}from"./ticketing-CaVvnitd.js";import{I as P}from"./input-Bg5krjAV.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=v("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=v("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),N=y.forwardRef(({className:o,...n},l)=>e.jsx("textarea",{className:k("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o),ref:l,...n}));N.displayName="Textarea";const G=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Q=I({rating:L().int().min(1,"Please provide a rating").max(5,"Rating must be between 1 and 5"),category:R(["event","venue","service"]),feedback:j().trim().min(10,"Feedback must be at least 10 characters").max(500,"Feedback must be 500 characters or less"),email:j().trim().max(254,"Email must be 254 characters or less").optional().default("").refine(o=>!o||G.test(o),{message:"Enter a valid email address"})}),u={rating:0,category:"event",feedback:"",email:""},X=({isOpen:o,onClose:n,eventName:l,eventId:w})=>{const[F,r]=y.useState(0),a=B({resolver:$(Q),defaultValues:u}),f=a.watch("feedback"),p=a.watch("rating"),{isSubmitting:h}=a.formState,S=a.handleSubmit(async s=>{var b;await new Promise(D=>setTimeout(D,1500));const t=JSON.parse(localStorage.getItem("eventFeedbacks")||"[]"),E=s.feedback.trim(),T=((b=s.email)==null?void 0:b.trim())??"",C={eventId:w,eventName:l,rating:s.rating,category:s.category,feedback:E,email:T,timestamp:new Date().toISOString(),id:Date.now().toString()};t.push(C),localStorage.setItem("eventFeedbacks",JSON.stringify(t)),M({description:"Feedback submitted successfully • Thank you!"}),a.reset(u),r(0),n()});return e.jsx(V,{open:o,onOpenChange:s=>{s||(a.reset(u),r(0),n())},children:e.jsxs(H,{className:"bg-black border-white/20 max-w-md",children:[e.jsxs(J,{children:[e.jsx(K,{className:"font-mono uppercase text-sm",children:"EVENT FEEDBACK"}),e.jsx("div",{className:"text-xs text-neo-contrast/60 font-mono mt-1",children:l})]}),e.jsx(O,{...a,children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsx(i,{control:a.control,name:"rating",render:({field:s})=>e.jsxs(c,{children:[e.jsx(m,{className:"font-mono text-sm",children:"Overall Rating *"}),e.jsx(d,{children:e.jsx("div",{className:"flex gap-1",role:"radiogroup","aria-label":"Overall rating",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>s.onChange(t),onMouseEnter:()=>r(t),onMouseLeave:()=>r(0),className:"transition-colors","aria-label":`${t} star${t===1?"":"s"}`,"aria-pressed":p===t,children:e.jsx(z,{className:`w-6 h-6 ${t<=(F||p)?"fill-yellow-500 text-yellow-500":"text-white/30"}`})},t))})}),e.jsx(x,{})]})}),e.jsx(i,{control:a.control,name:"category",render:({field:s})=>e.jsxs(c,{children:[e.jsx(m,{className:"font-mono text-sm",children:"Feedback Category"}),e.jsx(d,{children:e.jsxs("select",{...s,className:"w-full px-3 py-2 bg-black border border-white/20 rounded-md font-mono text-sm",children:[e.jsx("option",{value:"event",children:"Event Experience"}),e.jsx("option",{value:"venue",children:"Venue Quality"}),e.jsx("option",{value:"service",children:"Ticketing Service"})]})}),e.jsx(x,{})]})}),e.jsx(i,{control:a.control,name:"feedback",render:({field:s})=>e.jsxs(c,{children:[e.jsx(m,{className:"font-mono text-sm",children:"Your Feedback *"}),e.jsx(d,{children:e.jsx(N,{...s,placeholder:"Tell us about your experience...",className:"min-h-[100px] font-mono text-sm",maxLength:500})}),e.jsxs("div",{className:"text-xs text-white/60 mt-1 font-mono",children:[(f==null?void 0:f.length)??0,"/500 characters"]}),e.jsx(x,{})]})}),e.jsx(i,{control:a.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsxs(m,{className:"font-mono text-sm flex items-center gap-2",children:["Email (optional)",e.jsx("span",{className:"text-xs text-white/60 font-mono",children:"for follow-up"})]}),e.jsx(d,{children:e.jsx(P,{...s,type:"email",placeholder:"your@email.com",className:"font-mono"})}),e.jsx(A,{className:"font-mono text-xs text-white/60",children:"We’ll only use this if we need more detail."}),e.jsx(x,{})]})}),e.jsxs("div",{className:"flex flex-col-reverse gap-3 pt-4 sm:flex-row",children:[e.jsx(g,{type:"button",variant:"neo-outline",onClick:()=>{a.reset(u),r(0),n()},className:"flex-1 font-mono uppercase",disabled:h,children:"[ CANCEL ]"}),e.jsxs(g,{type:"submit",variant:"neo",className:"flex-1 font-mono uppercase",disabled:h,children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),h?"[ SUBMITTING... ]":"[ SUBMIT FEEDBACK ]"]})]})]})})]})})};function _({className:o,...n}){return e.jsx("div",{className:k("animate-pulse rounded-md bg-muted",o),...n})}export{X as F,U as M,_ as S,N as T};
